(self.webpackChunk=self.webpackChunk||[]).push([[929],{89929:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>nt});var a=s(2784),i=s(47933),n=s(67594),l=s(19126),r=s.n(l),d=s(47457);const c=function(e,t){const[s,i]=(0,a.useState)(e);return(0,a.useEffect)((()=>{const s=setTimeout((()=>i(e)),t||500);return()=>{clearTimeout(s)}}),[e,t]),s};var o=s(52322);const u=()=>(0,o.jsx)("div",{className:"ui-flex center py-40",children:(0,o.jsxs)("div",{className:"ui-flex column v-center center ",children:[(0,o.jsx)(n.JO,{type:"Search",size:30,className:"mb-10"}),(0,o.jsx)(n.ZT,{size:"large",children:"No Results"}),(0,o.jsx)(n.ZT,{size:"small",muted:!0,className:"mt-20",children:"No results found. Please check your filters."})]})}),m=({entity:e=""})=>(0,o.jsx)("div",{className:"menu-no-permissions ui-flex center py-40","data-testid":"menu-no-permission",children:(0,o.jsxs)("div",{className:"ui-flex column v-center center ",children:[(0,o.jsx)(n.JO,{type:"WarningTriangle",size:30,className:"mb-10"}),(0,o.jsx)(n.ZT,{h2:!0,children:"No Permissions!"}),(0,o.jsxs)(n.ZT,{size:"small",muted:!0,className:"mt-10",children:["You have no permissions to view ",e,". Please contact you administrator!"]})]})});var h=s(49803),x=s(88299),p=s(84931);const j="MM-dd-yyyy",g="yyyy-MM-dd",b=(e,t=10)=>Math.ceil(e/t)||1,y=e=>e?(0,x.default)((0,p.default)(e,j,new Date),g):null,v=(e,t="MM-dd-yyyy")=>e?(0,x.default)((0,p.default)(e,g,new Date),t):null,N=e=>e?(0,x.default)((0,h.Dy_)(e),j):"",_=()=>{var e;const{can:t}=(0,a.useContext)(n.Il),{t:s}=(0,n.$G)(),l=(0,n.h_)(d.pH.MENU),h=(0,i.k6)(),[x,p]=(0,a.useState)(),[j,g]=(0,a.useState)(""),[b,y]=(0,a.useState)(!0),[N,_]=(0,a.useState)(1),[f,Z]=(0,a.useState)(h.location.search),C=c(j),w=t(d.g3.MENU.CAN_GET_CATEGORIES),E=t(d.g3.MENU.CAN_CREATE_CATEGORY),I=t(d.g3.MENU.CAN_UPDATE_CATEGORY),U=async e=>{const t=r().parse(h.location.search.replace("?","").replace(/\|([^&]*)&?/g,"&")),s=decodeURIComponent(r().stringify(t)).replace(/\|([^&]*)&?/g,"&"),a=await l.get(C?`/categories?${s}name=${C}&page=${e}`:`/categories?${s}page=${e}`);p(a.data),_(e),y(!1)};(0,a.useEffect)((()=>{w&&U(1)}),[f,C]);return w?b?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","filterTable"]})})}):(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:s("category_list")}),E&&(0,o.jsx)(n.zx,{onClick:()=>h.push("/menu/category/editor"),children:s("create")})]}),children:[(0,o.jsx)("div",{className:"menu-toolbar",children:(0,o.jsxs)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:[(0,o.jsx)(n.x$,{columns:[{name:"Type",queryParamName:"type",data:[{label:"Category",queryParamValue:"category"},{label:"Subcategory",queryParamValue:"subcategory"}]}],onChange:e=>{Z(e),h.push(`?${e}`)},filtersString:f}),(0,o.jsx)(n.Vr,{value:j,placeholder:s("search"),onChange:e=>g(e.target.value)})]})}),(0,o.jsxs)(n.iA,{children:[(0,o.jsx)(n.ss,{children:(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{as:"th",children:s("name")}),(0,o.jsx)(n.pj,{as:"th",children:s("is_subcategory")}),(0,o.jsx)(n.pj,{as:"th",children:s("start_period")}),(0,o.jsx)(n.pj,{as:"th",children:s("end_period")}),(0,o.jsx)(n.pj,{as:"th",style:{width:50}})]})}),(0,o.jsx)(n.RM,{children:null==x||null==(e=x.payload)?void 0:e.map((e=>(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.rU,{size:"medium",component:i.rU,to:`/menu/category/view/${e.id}`,children:e.name})}),(0,o.jsx)(n.pj,{children:e.parent_category_id?"Yes":"No"}),(0,o.jsx)(n.pj,{children:v(e.start_date)}),(0,o.jsx)(n.pj,{children:v(e.end_date)}),(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.Lt,{renderTrigger:(e,t)=>(0,o.jsx)(n.Kk,{onClick:e,ref:t,children:(0,o.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,o.jsxs)("div",{className:"ui-flex column",style:{width:160},children:[(0,o.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>h.push(`/menu/category/view/${e.id}`),leftIcon:(0,o.jsx)(n.JO,{type:"EyeOpen",size:18}),children:s("view")}),I&&(0,o.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>{h.push(`/menu/category/manage/${e.id}`)},leftIcon:(0,o.jsx)(n.JO,{type:"Pen01",size:18}),children:s("edit")})]})})})]},e.id)))})]}),x&&!((x.payload||[]).length<1)||b?(0,o.jsx)(n.tl,{className:"ui-flex end mt-20",pages:(0,d.gc)(Number(null==x?void 0:x.total)),current:N,onPageChange:U}):(0,o.jsx)("div",{children:(0,o.jsx)(u,{})})]})})})}):(0,o.jsx)(m,{entity:"Categories"})};var f=s(63955),Z=s(30621);const C=()=>{var e,t;const{can:s}=(0,a.useContext)(n.Il),{t:l}=(0,n.$G)(),r=(0,n.h_)(d.pH.MENU),c=(0,i.k6)(),[u,m]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),[p,j]=(0,a.useState)(),[g,b]=(0,a.useState)(!0),[v,N]=(0,a.useState)(!1),[_,C]=(0,a.useState)(!1),[w,E]=(0,a.useState)(!1),[I,U]=(0,a.useState)({start:"",end:""}),{register:S,handleSubmit:Q,watch:F,formState:{errors:W},setValue:z}=(0,f.cI)({resolver:(0,Z.X)(d.xh),defaultValues:{isSubcategory:!1}}),L=s(d.g3.MENU.CAN_GET_CATEGORIES),O=s(d.g3.MENU.CAN_CREATE_CATEGORY);(0,a.useEffect)((()=>{const e=F(((e,{name:t})=>{t&&E(!0)}));return()=>e.unsubscribe()}),[F]),(0,a.useEffect)((()=>{L?(async()=>{const e=await r.get("/categories?type[0]=category&paginate=false");j(e.data),b(!1)})():b(!1)}),[]);const T=e=>{const t="subcategory"===e.target.value;z("isSubcategory",t),C(t)};return O?g?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField","labelField"]})})}):(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(n.ZT,{h2:!0,children:l("create_new_category")}),children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{offset:3,size:6,children:(0,o.jsxs)("form",{onSubmit:Q((async e=>{if(m(""),null!=e&&e.start_date&&null!=e&&e.end_date){if(Date.parse(e.start_date)===Date.parse(e.end_date))return void U({start:"Start date can not be equal with end date!",end:"End date can not be equal with start date!"});if(Date.parse(e.start_date)>Date.parse(e.end_date))return void U({start:"Start date can not be after end date!",end:"End date can not be before start date!"})}try{x(!0);let t={};t=_?{name:e.name,start_date:y(e.start_date)||null,end_date:y(e.end_date)||null,parent_category_id:parseInt(e.categoryId,10)}:{name:e.name,start_date:y(e.start_date)||null,end_date:y(e.end_date)||null},await r.post("/categories",t),c.push("/menu/category/list")}catch(t){m(t.message)}finally{x(!1)}})),children:[(0,o.jsx)(n.NI,{label:l("category_name"),className:"mt-20",children:(0,o.jsx)(n.II,Object.assign({"data-testid":"input-category-name",placeholder:l("enter_category_name")},S("name"),{error:null==(e=W.name)?void 0:e.message}))}),(0,o.jsxs)(n.cw,{className:"mt-10",children:[(0,o.jsx)(n.NI,{label:l("Start Date"),children:(0,o.jsx)(n.Mt,{"data-testid":"input-start-time",inputProps:Object.assign({},S("start_date"),{placeholder:l("Start Date"),error:I.start})})}),(0,o.jsx)(n.NI,{label:l("End"),children:(0,o.jsx)(n.Mt,{"data-testid":"input-end-time",inputProps:Object.assign({},S("end_date"),{placeholder:l("End Date"),error:I.end})})})]}),(0,o.jsx)(n.NI,{label:l("category?"),className:"mt-10",children:(0,o.jsx)(n.Y8,{"data-testid":"radio-is-subcategory",value:"category",name:"category_type",checked:!_,onChange:T})}),L&&(0,o.jsx)(n.NI,{label:l("subcategory?"),className:"mt-10",children:(0,o.jsx)(n.Y8,{"data-testid":"radio-is-subcategory",value:"subcategory",name:"category_type",checked:_,onChange:T})}),_&&(0,o.jsx)(n.NI,{label:l("category"),children:(0,o.jsxs)(n.Ph,{"data-testid":"select-category-name",value:"",selectProps:Object.assign({},S("categoryId")),error:null==(t=W.categoryId)?void 0:t.message,children:[(0,o.jsx)(n.Wx,{value:"",disabled:!0,hidden:!0,children:l("please_select_category")}),(M=(null==p?void 0:p.payload)||[],M.length?(M||[]).map((e=>(0,o.jsx)(n.Wx,{value:e.id,children:e.name},e.id))):null)]})}),u&&(0,o.jsx)("div",{className:"mt-20",children:(0,o.jsx)(n.Bc,{error:u})}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsxs)("div",{className:"form-bottom-action",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e="/menu/category/list",w?N(!0):c.push(e)},children:l("cancel")}),(0,o.jsx)(n.zx,{"data-testid":"category-submit",type:"submit",variant:"primary",disabled:h,children:l("save")})]})]})})})})}),(0,o.jsx)(n.RZ,{modal:v,setModal:N,onLeave:()=>c.push("/menu/category/list")})]})}):((0,n.hi)("You have no permissions to create category",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/category/list"}));var M},w="proceed anyway",E=(e,t)=>{switch(t){case"subcategories":return`menu/category/manage/${e}`;case"items":return`menu/item/manage/${e}`;case"menus":return`/menu/menu/manage/${e}`;default:return""}},I=({relations:e,keys:t,isLoading:s,title:i,onDelete:l,onClose:r,deleteConfirmation:d,contentText:c})=>{const{t:u}=(0,n.$G)(),[m,h]=(0,a.useState)(!0),[x,p]=(0,a.useState)();(0,a.useEffect)((()=>{h(x!==w),d(x)}),[x]);const j=e&&t.reduce(((t,s)=>t||e[s].length>0),!1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:null!=c&&c.title?c.title:`${u("delete")} ${i}`}),(0,o.jsx)(n.iz,{}),(0,o.jsxs)(n.ZT,{className:"ui-flex mb-10",children:[null!=c&&c.subtitle?c.subtitle:`${u("delete_confirm")} ${null==i?void 0:i.toLowerCase()}`,"?"]}),s&&(0,o.jsx)(n.Od,{parts:["labelField-4"],className:"mt-20"}),j&&(0,o.jsxs)(n.ZT,{children:[null!=c&&c.info?c.info:u("delete_entity_used_on",{entity:null==i?void 0:i.toLowerCase()}),": "]}),!s&&j&&t.map((t=>{const s=null==e?void 0:e[t];return s.length?(0,o.jsxs)("div",{className:"mt-30",children:[(0,o.jsxs)(n.ZT,{size:"large",className:"menu-text-capitalize",p:!0,children:[t,":"]}),(0,o.jsx)("ul",{className:"mt-10",children:s.map((e=>(0,o.jsx)("li",{className:"my-5",children:(0,o.jsxs)(n.rU,{size:"medium",href:E(e.id,t),target:"_blank",className:"ui-flex v-center between ui-border p-10 ui-rounded",children:[e.name,(0,o.jsx)(n.JO,{type:"Link",size:14,className:"ml-5"})]})},e.id)))})]},t):null})),(0,o.jsxs)("div",{className:"ui-flex mt-30 column end",children:[(0,o.jsx)(n.ZT,{className:"mb-10",children:u("type_validation_to_continue",{validation:w})}),(0,o.jsx)(n.II,{placeholder:w,onChange:e=>p(e.target.value)})]}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsxs)("div",{className:"ui-flex v-center end",children:[(0,o.jsx)(n.zx,{size:"large",variant:"ghost",onClick:r,children:u("cancel")}),(0,o.jsx)(n.zx,{disabled:m,size:"large",variant:"danger",className:"ml-10",onClick:()=>{h(!0),l(x)},children:u("continue")})]})]})},U=e=>{const{t}=(0,n.$G)(),s=(0,n.h_)(d.pH.MENU),[i,l]=(0,a.useState)(),[r,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)();return(0,a.useEffect)((()=>{(async()=>{try{const t=await s.get(`/categories/${e.meta.id}/relations`);l(t.data)}catch(t){c(!1)}finally{c(!1)}})()}),[]),(0,o.jsx)(n.u_,{visible:!0,onClose:e.onClose,style:{minWidth:500},children:(0,o.jsx)(I,{title:t("category"),isLoading:r,relations:i,deleteConfirmation:e=>m(e),keys:["menus","subcategories","items"],onClose:e.onClose,onDelete:async()=>{try{await s.delete(`/categories/${e.meta.id}`,{data:{confirmation:u}}),e.onDelete()}catch(t){console.log(t)}finally{c(!1)}}})})},S=()=>{var e,t;const{can:s}=(0,a.useContext)(n.Il),{t:l}=(0,n.$G)(),r=(0,n.h_)(d.pH.MENU),c=(0,i.k6)(),u=(0,i.UO)(),[m,h]=(0,a.useState)(),[x,p]=(0,a.useState)(!0),[j,g]=(0,a.useState)(),b=s(d.g3.MENU.CAN_GET_CATEGORY),y=s(d.g3.MENU.CAN_UPDATE_CATEGORY),v=s(d.g3.MENU.CAN_DELETE_CATEGORY);return(0,a.useEffect)((()=>{if(!b)return void(0,n.hi)("You have no permissions to view category",{type:"warning"});(async()=>{const e=await r.get(`/categories/${u.id}`);h(e.data.payload),p(!1)})()}),[u.id]),b?x?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","text","text","text"]})})}):(0,o.jsxs)(n.rj,{gutter:0,children:[(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsxs)("div",{className:"w-100 ui-flex between v-center pl-30 pr-20 pt-10",children:[(0,o.jsx)(n.ZT,{h2:!0,children:null==m?void 0:m.name}),(0,o.jsx)(n.Lt,{renderTrigger:(e,t)=>(0,o.jsx)(n.zx,{size:"small",variant:"ghost",ref:t,onClick:e,iconOnly:!0,children:(0,o.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,o.jsx)("div",{className:"ui-flex column network-action-dropdown",children:(0,o.jsx)("div",{children:v&&(0,o.jsxs)(n.zx,{className:"w-100",variant:"danger-ghost",muted:!0,onClick:()=>{g({resource:"category",id:u.id})},children:[(0,o.jsx)(n.JO,{type:"Delete",size:20,className:"mr-10"}),l("Delete")]})})})})]})})}),(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:l("General Information")}),y&&(0,o.jsx)(n.rU,{component:n.Xd,onClick:()=>c.push(`/menu/category/manage/${null==m?void 0:m.id}`),children:l("edit")})]}),children:(0,o.jsxs)(n.X2,{cols:1,children:[(0,o.jsxs)(n.sg,{className:"mt-10",children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:l("category_name")}),(0,o.jsx)(n.ZT,{children:null==m?void 0:m.name})]}),null!=m&&m.parent_category_id?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:l("category")}),(0,o.jsx)(n.ZT,{children:null==m||null==(e=m.parent_category)?void 0:e.name})]}),((null==m?void 0:m.start_date)||(null==m?void 0:m.end_date))&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:l("start_period")}),(0,o.jsx)(n.ZT,{children:null==m?void 0:m.start_date})]}),(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:l("end_period")}),(0,o.jsx)(n.ZT,{children:null==m?void 0:m.end_date})]})]})]}):(0,o.jsxs)(o.Fragment,{children:[((null==m?void 0:m.start_date)||(null==m?void 0:m.end_date))&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:l("start_period")}),(0,o.jsx)(n.ZT,{children:null==m?void 0:m.start_date})]}),(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:l("end_period")}),(0,o.jsx)(n.ZT,{children:null==m?void 0:m.end_date})]})]}),(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:l("subcategories")}),null==m||null==(t=m.subcategories)?void 0:t.map((e=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(n.ZT,{size:"large",p:!0,children:e.name},e.id)})))]})]})]})})})}),j&&(0,o.jsx)(U,{meta:j,onClose:()=>g(void 0),onDelete:()=>{(0,n.hi)("Category deleted successfully",{type:"success"}),c.push("/menu/category/list")}})]}):(0,o.jsx)(i.l_,{to:"/menu/category/list"})},Q=()=>{var e,t;const{can:s}=(0,a.useContext)(n.Il),{t:l}=(0,n.$G)(),r=(0,n.h_)(d.pH.MENU),c=(0,i.k6)(),u=(0,i.UO)(),[m,h]=(0,a.useState)(""),[x,p]=(0,a.useState)(!1),[j,g]=(0,a.useState)(),[b,v]=(0,a.useState)(),[_,C]=(0,a.useState)(!1),[w,E]=(0,a.useState)(!1),[I,U]=(0,a.useState)(!0),[S,Q]=(0,a.useState)({start:"",end:""}),{register:F,handleSubmit:W,watch:z,formState:{errors:L},reset:O}=(0,f.cI)({resolver:(0,Z.X)(d.xh)}),T=s(d.g3.MENU.CAN_GET_CATEGORIES),M=s(d.g3.MENU.CAN_UPDATE_CATEGORY);(0,a.useEffect)((()=>{(async()=>{var e,t,s,a,i,n,l,d;const c=await r.get(`/categories/${u.id}`);if(g(c.data.payload),null!=(e=c.data.payload)&&e.parent_category_id){const e=await r.get("/categories?type[0]=category&paginate=false");v(e.data)}U(!1),O({isSubcategory:!(null==(t=c.data.payload)||!t.parent_category_id),name:null==(s=c.data.payload)?void 0:s.name,start_date:N(null==(a=c.data)||null==(i=a.payload)?void 0:i.start_date),end_date:N(null==(n=c.data)||null==(l=n.payload)?void 0:l.end_date),categoryId:null==(d=c.data.payload)?void 0:d.parent_category_id})})()}),[u.id]);(0,a.useEffect)((()=>{const e=z(((e,{name:t})=>{t&&E(!0)}));return()=>e.unsubscribe()}),[z]);return!M||null!=j&&j.parent_category_id&&!T?((0,n.hi)("You have no permissions to update category",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/category/list"})):I?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField","labelField"]})})}):(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)("div",{children:(0,o.jsx)(n.ZT,{h2:!0,children:null==j?void 0:j.name})}),children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{offset:3,size:6,children:(0,o.jsxs)("form",{onSubmit:W((async e=>{if(h(""),null!=e&&e.start_date&&null!=e&&e.end_date){if(Date.parse(e.start_date)===Date.parse(e.end_date))return void Q({start:"Start date can not be equal with end date!",end:"End date can not be equal with start date!"});if(Date.parse(e.start_date)>Date.parse(e.end_date))return void Q({start:"Start date can not be after end date!",end:"End date can not be before start date!"})}try{p(!0);const t=Object.assign({name:e.name,start_date:y(e.start_date)||null,end_date:y(e.end_date)||null},(null==j?void 0:j.parent_category_id)&&{parent_category_id:parseInt(e.categoryId,10)});await r.put(`/categories/${u.id}`,t),c.push(`/menu/category/view/${u.id}`)}catch(t){h(t.message)}finally{p(!1)}})),children:[(0,o.jsx)(n.NI,{label:l("category_name"),children:(0,o.jsx)(n.II,Object.assign({placeholder:l("enter_category_name")},F("name"),{error:null==(e=L.name)?void 0:e.message}))}),(0,o.jsxs)(n.cw,{className:"mt-10",children:[(0,o.jsx)(n.NI,{label:l("start_period"),children:(0,o.jsx)(n.Mt,{"data-testid":"input-start-time",inputProps:Object.assign({},F("start_date"),{error:S.start,placeholder:l("Start Date")})})}),(0,o.jsx)(n.NI,{label:l("end"),children:(0,o.jsx)(n.Mt,{"data-testid":"input-end-time",inputProps:Object.assign({},F("end_date"),{error:S.end,placeholder:l("End Date")})})})]}),(null==j?void 0:j.parent_category_id)&&(0,o.jsx)(n.NI,{label:l("category"),className:"mt-10",children:(0,o.jsxs)(n.Ph,{"data-testid":"select-category-name",defaultValue:"",selectProps:Object.assign({},F("categoryId")),error:null==(t=L.categoryId)?void 0:t.message,children:[(0,o.jsx)(n.Wx,{defaultValue:"",disabled:!0,hidden:!0,children:l("please_select_category")}),(k=(null==b?void 0:b.payload)||[],k.length?(k||[]).map((e=>e.parent_category_id?null:(0,o.jsx)(n.Wx,{value:e.id,children:e.name},e.id))):null)]})}),m&&(0,o.jsx)("div",{className:"mt-20",children:(0,o.jsx)(n.Bc,{error:m})}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsxs)("div",{className:"form-bottom-action",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e=`/menu/category/view/${u.id}`,w?C(!0):c.push(e)},children:l("cancel")}),(0,o.jsx)(n.zx,{type:"submit",variant:"primary",disabled:x,children:l("save")})]})]})}),(0,o.jsx)(n.RZ,{modal:_,setModal:C,onLeave:()=>c.push("/menu/category/list")})]})})})})});var k};const F=function(e,t){let s=e-t;const a=Math.floor(s/1e3/60/60/24);s-=1e3*a*60*60*24;const i=Math.ceil(s/1e3/60/60);return s-=1e3*i*60*60,[a,i]},W="CREATE",z=e=>{const{t}=(0,n.$G)(),s=(0,n.h_)(d.pH.MENU),[i,l]=(0,a.useState)(),[r,m]=(0,a.useState)(null),[h,x]=(0,a.useState)(1),[p,j]=(0,a.useState)([]),[g,b]=(0,a.useState)([]),[y,v]=(0,a.useState)(!1),[N,_]=(0,a.useState)(W),[Z,C]=(0,a.useState)(""),[w,E]=(0,a.useState)(""),I=c(Z),{register:U,handleSubmit:S,formState:{errors:Q}}=(0,f.cI)({defaultValues:{}}),z=async(e=1)=>{const t=await s.get(I?`/external/relation/hubs?name=${I}&page=${e}&limit=5`:`/external/relation/hubs?page=${e}&limit=5`);x(e),l(t.data)};(0,a.useEffect)((()=>{z(),(async()=>{const t=(await s.get(`/products/${e.meta.id}`)).data.payload,a=[];((null==t?void 0:t.out_of_stock)||[]).map(((e,t)=>{const[s,i]=F(new Date(e.available_at).getTime(),(new Date).getTime()),n={id:e.hub.id,name:e.hub.name,days:s,hours:i};a.push(n)})),j(a)})()}),[]),(0,a.useEffect)((()=>{z()}),[I]);const L=(e,t,s)=>{if(p.some((t=>t.id===e.id))){e[s]=Number(t);const a=p.findIndex((t=>t.id===e.id)),i=[...p.slice(0,a),e,...p.slice(a+1)];j(i)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.ZT,{h2:!0,children:[t("item_name"),": ",e.meta.name]}),(0,o.jsx)(n.iz,{}),(0,o.jsxs)("form",{onSubmit:S((async()=>{const t={hubs:p.filter((e=>e.days||e.hours)).map((e=>({hub_id:e.id,days:e.days,hours:e.hours})))};try{v(!0),await s.post(`/products/${e.meta.id}/out-of-stock`,t),null==e.onSubmitSuccess||e.onSubmitSuccess()}catch(w){E(w.response.data.error)}finally{v(!1)}e.onClose()})),children:[(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{p:!0,size:"large",className:"mb-20 mt-20",children:t("selected_hubs")}),(0,o.jsx)(n.NI,{children:(0,o.jsx)("div",{className:"ui-flex wrap",children:Object.values(p).map((e=>(0,o.jsx)(n.Af,{className:"mb-5 mr-5",size:"medium",onClose:t=>{var s;s=e.id,j(p.filter((e=>e.id!==s)))},children:e.name})))})})]}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{size:"large",p:!0,className:"mt-20 mb-20",children:t("hubs_list")}),(0,o.jsx)(n.Vr,{value:Z,placeholder:t("search"),className:"mb-20",onChange:e=>C(e.target.value)}),(0,o.jsxs)("div",{className:"ui-flex v-center end",children:[(0,o.jsx)(n.ZT,{p:!0,className:"mb-10 mr-10",style:{minWidth:100},children:"Days"}),(0,o.jsx)(n.ZT,{p:!0,className:"mb-10",style:{minWidth:100},children:"Hours"})]}),(0,o.jsxs)("div",{className:"ui-flex even column mb-10",children:[((null==i?void 0:i.payload)||[]).map((e=>{var t,s;const a=p.find((t=>t.id===e.id));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"ui-flex between v-center",style:{minHeight:30},children:[(0,o.jsx)(n.NI,{children:(0,o.jsx)(n.XZ,{name:`hubs[${e.id}].${e.name}`,label:e.name,onChange:t=>((e,t)=>{if(e.id){if(!t)return j(p.filter((t=>t.id!==e.id)));p.find((t=>t.id===e.id))||j([...p,e])}})(e,t.currentTarget.checked),checked:p.some((t=>t.id===e.id))},e.id)}),!!a&&(0,o.jsxs)("div",{className:"ui-flex",children:[(0,o.jsx)(n.NI,{className:"mr-10",children:(0,o.jsx)(n.II,{type:"number",placeholder:"0",min:"0",value:a.days||"",style:{width:100,height:30},onChange:e=>L(a,e.currentTarget.value,"days"),error:null==Q||null==(t=Q.days)?void 0:t.message},e.id)}),(0,o.jsx)(n.NI,{children:(0,o.jsx)(n.II,{type:"number",style:{width:100,height:30},max:"23",min:"0",placeholder:"0",value:a.hours||"",error:null==Q||null==(s=Q.hours)?void 0:s.message,onChange:e=>L(a,e.currentTarget.value,"hours")},e.id)})]})]}),(0,o.jsx)(n.iz,{vertical:10})]})})),!i||(i.payload||[]).length<1?(0,o.jsx)("div",{children:(0,o.jsx)(u,{})}):(0,o.jsx)(n.tl,{className:"ui-flex end mt-20",pages:(0,d.gc)(Number(null==i?void 0:i.total),5),current:h,onPageChange:z})]})]}),w&&(0,o.jsx)("div",{className:"mt-20 mb-20",children:(0,o.jsx)(n.Bc,{error:w})}),(0,o.jsxs)("div",{className:"ui-flex v-center end",children:[(0,o.jsx)(n.zx,{size:"large",variant:"ghost",onClick:e.onClose,children:t("cancel")}),(0,o.jsx)(n.zx,{type:"submit",disabled:y,className:"ml-10",size:"large",variant:"primary",children:t("save")})]})]})]})},L=()=>{var e,t;const{can:s}=(0,a.useContext)(n.Il),{t:l}=(0,n.$G)(),r=(0,n.h_)(d.pH.MENU),h=(0,i.k6)(),[x,p]=(0,a.useState)(),[j,g]=(0,a.useState)(),[b,y]=(0,a.useState)(1),[v,N]=(0,a.useState)(""),[_,f]=(0,a.useState)(!0),Z=c(v),[C,w]=(0,a.useState)(!0),E=s(d.g3.MENU.CAN_GET_ITEMS),I=s(d.g3.MENU.CAN_CREATE_ITEM),U=s(d.g3.MENU.CAN_UPDATE_ITEM),S=s(d.g3.MENU.CAN_GET_ITEM),Q=async e=>{const t=await r.get(Z?`/products?name=${Z}&page=${e}`:`/products?page=${e}`);p(t.data),y(e),f(!1)};return(0,a.useEffect)((()=>{E&&Q(1)}),[]),(0,n.N7)((()=>{Q(1)}),[Z]),E?_?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","filterTable"]})})}):(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{children:(0,o.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:l("items_list")}),I&&(0,o.jsx)(n.zx,{onClick:()=>h.push("/menu/item/create"),children:l("create")})]}),children:[(0,o.jsx)("div",{className:"menu-toolbar",children:(0,o.jsx)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:(0,o.jsx)(n.Vr,{value:v,placeholder:l("search"),onChange:e=>N(e.target.value)})})}),(0,o.jsxs)(n.iA,{children:[(0,o.jsx)(n.ss,{children:(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{as:"th",style:{width:60},children:l("image")}),(0,o.jsx)(n.pj,{as:"th",children:l("name")}),(0,o.jsx)(n.pj,{as:"th",children:l("price")}),(0,o.jsx)(n.pj,{as:"th",children:l("description")}),(0,o.jsx)(n.pj,{as:"th",style:{width:50}})]})}),(0,o.jsx)(n.RM,{children:null==x||null==(e=x.payload)?void 0:e.map((e=>{var t,s,a;return(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.rU,{className:"ui-flex w-100",component:i.rU,to:`/menu/item/view/${e.id}`,children:(0,o.jsx)(n.Ee,{src:`${null==e?void 0:e.image_base_url}/image/400x400/${e.image}`,alt:e.name,width:40,height:40})})}),(0,o.jsx)(n.pj,{children:S?(0,o.jsx)(n.rU,{size:"medium",component:i.rU,to:`/menu/item/view/${e.id}`,children:e.name}):e.name}),(0,o.jsxs)(n.pj,{children:["$",null==(t=Number(e.price))?void 0:t.toFixed(2)]}),(0,o.jsx)(n.pj,{children:(null==(s=e.description)?void 0:s.length)>=80?`${null==(a=e.description)?void 0:a.substring(0,80)}...`:e.description}),(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.Lt,{renderTrigger:(e,t)=>(0,o.jsx)(n.Kk,{onClick:e,ref:t,children:(0,o.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:160},children:[(0,o.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>h.push(`/menu/item/view/${e.id}`),leftIcon:(0,o.jsx)(n.JO,{type:"EyeOpen",size:18}),children:l("view")}),U&&(0,o.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>{h.push(`/menu/item/manage/general-information/${e.id}`)},leftIcon:(0,o.jsx)(n.JO,{type:"Pen01",size:18}),children:l("edit")}),(0,o.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>{e.id&&(g({resource:"item",id:e.id,name:e.name}),w(!0))},children:"86 Item"})]})})})]},e.id)}))})]}),null!=x&&x.payload&&!((null==x||null==(t=x.payload)?void 0:t.length)<1)||_?(0,o.jsx)(n.tl,{className:"ui-flex end mt-20",pages:(0,d.gc)(Number(null==x?void 0:x.total)),current:b,onPageChange:Q}):(0,o.jsx)("div",{children:(0,o.jsx)(u,{})})]})}),j&&(0,o.jsx)(n.u_,{visible:C,onClose:()=>w(!1),style:{minWidth:780},children:(0,o.jsx)(z,{meta:j,onClose:()=>w(!1)})})]})}):(0,o.jsx)(m,{entity:"Items"})};var O=s(89644),T=s.n(O),M=s(31461),k=s(10609),D=s(72779),G=s.n(D),X=s(46062),B=s.n(X),A=s(44036),V=s.n(A),$=s(96793),R=s.n($),H=s(17892),Y=s.n(H),J=s(11173),P=s.n(J),q=s(42464),K=s.n(q),ee=s(49322),te=s.n(ee),se={};se.styleTagTransform=K(),se.setAttributes=Y(),se.insert=R().bind(null,"head"),se.domAPI=V(),se.insertStyleElement=P();B()(te(),se);te()&&te().locals&&te().locals;const ae=["onChange","error","name"],ie=a.forwardRef(((e,t)=>{let{onChange:s,error:i,name:l}=e,r=(0,M.Z)(e,ae);const{t:d}=(0,n.$G)(),[c,u]=(0,a.useState)(null),m=(0,a.useRef)(null),h=(0,k.cR)(t,m);return(0,o.jsxs)("div",{style:{height:20},className:G()("ui-input-file",{"ui-input-error":i}),children:[c?(0,o.jsxs)("div",{className:"ui-flex v-center",children:[(0,o.jsx)("span",{children:c.name}),(0,o.jsx)(n.rU,{component:n.Xd,onClick:e=>{e.preventDefault(),m.current&&(m.current.value=""),u(null),s({target:{name:l,value:null}})},className:"ml-5",children:(0,o.jsx)(n.JO,{type:"Close",size:20})})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)(n.rU,{size:"medium",variant:i?"danger":"primary",component:n.Xd,type:"file",onClick:e=>{var t;e.preventDefault(),null==m||null==(t=m.current)||t.click()},children:d("upload_attachment")}),(0,o.jsx)("input",Object.assign({},r,{ref:h,accept:"image/*",type:"file",onChange:e=>{u(e.target.files[0]),s({target:{name:l,value:e.target.files[0]}})},hidden:!0,style:{display:"none"}}))]}),i&&(0,o.jsx)(n.u,{offset:[0,15],content:i,placement:"right",children:(0,o.jsx)(n.JO,{className:"ml-5",type:"Infoi",size:18})})]})})),ne=()=>{var e,t,s,l;const{can:r}=(0,a.useContext)(n.Il),{t:c}=(0,n.$G)(),u=(0,n.h_)(d.pH.MENU),m=(0,i.k6)(),{register:h,handleSubmit:x,watch:p,formState:{errors:j},getValues:g}=(0,f.cI)({resolver:(0,Z.X)(d.f6),defaultValues:{image:void 0}}),[b,y]=(0,a.useState)(),[v,N]=(0,a.useState)(!1),[_,C]=(0,a.useState)(""),[w,E]=(0,a.useState)(""),[I,U]=(0,a.useState)(),[S,Q]=(0,a.useState)([]),[F,W]=(0,a.useState)(null),z=r(d.g3.MENU.CAN_CREATE_ITEM),[L,O]=(0,a.useState)(!1),[M,k]=(0,a.useState)(!1);(0,a.useEffect)((()=>{z&&((async()=>{const e=await u.get("/categories?grouped=true");y(e.data)})(),(async()=>{const e=await u.get("/modifiers");U(e.data)})(),(async()=>{const e=await u.get("/products/upload/presign-url");W(e.data)})())}),[]);return(0,a.useEffect)((()=>{const e=p(((e,{name:t})=>{t&&k(!0)}));return()=>e.unsubscribe()}),[p]),z?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(n.ZT,{h2:!0,children:c("create_new_item")}),children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{offset:3,size:6,children:(0,o.jsxs)("form",{onSubmit:x((async e=>{if(e.categories=e.categories.reduce(((e,t)=>e.concat(t)),[]).map((e=>parseInt(e))).filter((e=>e)),e.modifiers=S,!e.categories.length)return E(c("subcategory_not_selected_error")),void N(!1);C("");try{var t;N(!0),await T().put(F.url,e.image),e.image=F.imagekey;const s=await u.post("/products",e);m.push(`/menu/item/view/${null==(t=s.data.payload)?void 0:t.id}`)}catch(_){C(c("could_not_create_item"))}finally{N(!1)}})),children:[(0,o.jsx)(n.ZT,{h2:!0,className:"mb-20",children:c("general_information")}),(0,o.jsx)(n.NI,{label:c("item_name"),children:(0,o.jsx)(n.II,Object.assign({"data-testid":"input-item-name",placeholder:c("enter_item_name")},h("name"),{error:null==(e=j.name)?void 0:e.message}))}),(0,o.jsx)(n.NI,{label:c("item_price"),children:(0,o.jsx)(n.II,Object.assign({"data-testid":"input-item-price",type:"number",step:".01",placeholder:"0.00",prefixNode:"$"},h("price"),{error:null==(t=j.price)?void 0:t.message}))}),(0,o.jsx)(n.NI,{label:c("item_description"),children:(0,o.jsx)(n.II,Object.assign({"data-testid":"input-item-description",placeholder:c("enter_item_description")},h("description"),{error:null==(s=j.description)?void 0:s.message}))}),(0,o.jsx)(n.NI,{children:(0,o.jsx)(n.XZ,Object.assign({"data-testid":"input-needs_cutlery"},h("needs_cutlery"),{label:c("needs_cutlery")}))}),(0,o.jsx)(n.NI,{label:"",children:(0,o.jsx)(n.XZ,Object.assign({"data-testid":"input-guest_view"},h("guest_view"),{label:c("guest_view")}))}),(0,o.jsx)(n.NI,{children:(0,o.jsx)(n.XZ,Object.assign({"data-testid":"input-raw_food"},h("raw_food"),{label:c("raw_food")}))}),(0,o.jsx)(n.NI,{label:c("image"),children:(0,o.jsx)(ie,Object.assign({"data-testid":"input-item-imagefile"},h("image"),{error:null==(l=j.image)?void 0:l.message}))}),(0,o.jsx)(n.iz,{}),(0,o.jsx)(n.ZT,{h2:!0,className:"mb-20",children:c("categories")}),b&&b.payload&&b.payload.length>0?((null==b?void 0:b.payload)||[]).map(((e,t)=>(0,o.jsx)(n.NI,{label:e.name,children:(0,o.jsx)(n.Ph,{multiple:!0,selectProps:h(`categories.[${e.id}]`),placeholder:c("select_subcategories"),error:w,children:(e.subcategories||[]).map((e=>(0,o.jsx)(n.Wx,{value:e.id,children:e.name},e.id)))})},t))):(0,o.jsx)(n.ZT,{children:c("no_categories_found")}),(0,o.jsx)(n.iz,{}),(0,o.jsx)(n.ZT,{h2:!0,className:"mb-10",children:c("modifiers")}),I&&I.payload&&I.payload.length>0?(0,o.jsx)(n.NI,{children:(0,o.jsx)("div",{className:"ui-flex even wrap",children:((null==I?void 0:I.payload)||[]).map((e=>(0,o.jsx)("div",{className:"mt-10",children:(0,o.jsx)(n.XZ,{name:e.name,label:e.name,onChange:()=>(e=>{const t=S.find((t=>t===e.id));return Q(t?(S||[]).filter((t=>t!==e.id)):[...S,e.id])})(e)},e.id)},e.id)))})}):(0,o.jsx)(n.ZT,{muted:!0,children:c("no_modifiers_found")}),(0,o.jsx)(n.iz,{vertical:30}),_&&(0,o.jsx)("div",{className:"my-20",children:(0,o.jsx)(n.Bc,{error:_})}),(0,o.jsx)(n.X2,{children:(0,o.jsxs)("div",{className:"form-bottom-action",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e="/menu/item/list",M?O(!0):m.push(e)},children:c("cancel")}),(0,o.jsx)(n.zx,{"data-testid":"item-submit",type:"submit",variant:"primary",disabled:v,children:c("save")})]})})]})}),(0,o.jsx)(n.RZ,{modal:L,setModal:O,onLeave:()=>m.push("/menu/item/list")})]})})})})}):((0,n.hi)("You have no permissions to create item.",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/item/list"}))};var le=s(11439),re=s.n(le),de={};de.styleTagTransform=K(),de.setAttributes=Y(),de.insert=R().bind(null,"head"),de.domAPI=V(),de.insertStyleElement=P();B()(re(),de);re()&&re().locals&&re().locals;const ce=["children"],oe=["disabled","placeholder","children","selectProps","value","name","error"],ue=e=>{let{children:t}=e,s=(0,M.Z)(e,ce);return(0,o.jsx)(n.HC,Object.assign({},s,{children:t}))},me=a.forwardRef(((e,t)=>{let{disabled:s,placeholder:i,children:l,selectProps:r,error:d}=e,c=(0,M.Z)(e,oe);const u=(0,a.useRef)(null),m=(0,a.useRef)(null),h=(0,k.cR)(null==r?void 0:r.ref,m),[x,p]=(0,a.useState)([]),j=e=>{if(!m.current)return;const t=e.target.innerHTML;for(let a=0;a<(null==(s=m.current)?void 0:s.options.length);a++){var s;const e=m.current.options[a];e.innerHTML===t&&(e.selected=!e.selected)}m.current.dispatchEvent(new Event("change")),c&&c.onChange&&(null==c||c.onChange(e)),u.current.closeDropdown()};(0,a.useEffect)((()=>{if(!m.current)return;const e=e=>{const t=[];for(let s=0;s<e.target.options.length;s++){const a=e.target.options[s];a.selected&&t.push(a.value)}e.target.defaultValue=t,null==r||null==r.onChange||r.onChange(e),p(t)};return(()=>{const e=[];for(let i=0;i<(null==m||null==(t=m.current)||null==(s=t.options)?void 0:s.length);i++){var t,s,a;const n=null==m||null==(a=m.current)?void 0:a.options[i];null!=n&&n.selected&&e.push(n.value)}p(e)})(),m.current.addEventListener("change",e),()=>{m.current&&m.current.removeEventListener("change",e)}}),[m,r]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("select",Object.assign({},r,{multiple:!0,ref:h,className:"selectselect",children:a.Children.map(l,((e,t)=>a.isValidElement(e)?a.createElement("option",Object.assign({},e.props,{key:t,onClick:j})):null))})),(0,o.jsx)(n.P7,{ref:u,attachment:"top center",targetAttachment:"bottom center",offset:"1px 0",dropdownComponent:n.Zb,dropdownComponentStyle:{maxHeight:170,overflowY:"auto",borderRadius:0},renderTrigger:(e,t,r)=>{var u;return(0,o.jsxs)("div",Object.assign({},c,{className:G()("ui-select-trigger",{"ui-select-trigger-multiple":!0,"ui-select-open":r,"ui-disabled":s,"ui-select-error":!!d}),onClick:s?void 0:e,ref:t,children:[-1!==(null==m||null==(u=m.current)?void 0:u.selectedIndex)?(0,o.jsx)("div",{className:"ui-select-multi-wrapper",children:a.Children.map(l,((e,t)=>{var s,i;const l=null==m||null==(s=m.current)?void 0:s.options[t];return a.isValidElement(e)&&null!=l&&l.selected?(0,o.jsx)(n.Af,{size:"medium",onClose:s=>{var a;return s.stopPropagation(),((e,t)=>{if(m){var s;const e=null==m||null==(s=m.current)?void 0:s.options[t];var a;e&&(e.selected=!1,null==m||null==(a=m.current)||a.dispatchEvent(new Event("change")))}})(null==(a=e.props)||a.children,t),!1},children:null==(i=e.props)?void 0:i.children}):null}))}):(0,o.jsx)("span",{className:"ui-placeholder",children:i}),(0,o.jsxs)("div",{className:"ui-select-suffix",children:[(0,o.jsx)(n.JO,{type:"ArrowDown",size:12}),!!d&&(0,o.jsx)(n.u,{offset:[0,25],content:d,placement:"right",children:(0,o.jsx)(n.JO,{type:"Infoi",size:18})})]})]}))},className:G()("ui-select",c.className),matchTriggerWidth:!0,children:(0,o.jsx)(n.aV,{children:a.Children.map(l,((e,t)=>a.isValidElement(e)?a.cloneElement(e,{key:t,value:t,selected:x.includes(e.props.value),onClick:j}):null))})})]})})),he=({item:e})=>{const{t}=(0,n.$G)(),s=(0,n.h_)(d.pH.MENU),l=(0,i.k6)(),[r,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),[p,j]=(0,a.useState)(),[g,b]=(0,a.useState)(),[y,v]=(0,a.useState)(),[N,_]=(0,a.useState)(),[Z,C]=(0,a.useState)({}),{register:w,handleSubmit:E,setValue:U,formState:{errors:S}}=(0,f.cI)(),Q={title:t("update_item_categories"),subtitle:t("change_category_of_item_confirm"),info:t("remove_category_affected_warning")};(0,a.useEffect)((()=>{(async()=>{const e=await s.get("/categories?grouped=true");j(e.data)})(),F()}),[]);const F=()=>{const t={};e.categories.forEach((({id:e,parent_category:s})=>{t[s.id]?t[`${s.id}`].push(`${e}`):t[`${s.id}`]=[`${e}`]})),C(t),U("categories",t)},W=async({categories:a},i)=>{c(!0);const n={categories:Object.values(a).reduce(((e,t)=>[...e,...t.map((e=>+e))]),[]),nonce:i};if(0===n.categories.length)return x(t("subcategory_not_selected_error")),void c(!1);try{await s.put(`/products/type/categories/${e.id}`,n),l.push(`/menu/item/view/${e.id}`)}catch(r){r.response.data&&m(r.response.data.message),r.response.data.result&&(_(r.response.data.result),b(!1))}finally{c(!1)}};return p?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(n.ZT,{h2:!0,children:t("update_item_subcategories")}),children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{offset:3,size:6,children:(0,o.jsxs)("form",{onSubmit:E((async e=>{await W(e)})),children:[((null==p?void 0:p.payload)||[]).length>0?((null==p?void 0:p.payload)||[]).map(((e,s)=>(0,o.jsx)(n.NI,{label:e.name,children:(0,o.jsx)(me,{selectProps:w(`categories.[${e.id}]`),placeholder:t("select_subcategories"),error:h,children:(e.subcategories||[]).map((e=>(0,o.jsx)(ue,{value:e.id,children:e.name},e.id)))})},s))):(0,o.jsx)(n.ZT,{children:t("no_categories_found")}),u&&(0,o.jsx)("div",{className:"mt-20",children:(0,o.jsx)(n.Bc,{error:u})}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsx)(n.X2,{children:(0,o.jsxs)("div",{className:"form-bottom-action",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>{l.push(`/menu/item/view/${e.id}`)},children:t("cancel")}),(0,o.jsx)(n.zx,{"data-testid":"item-submit",variant:"primary",type:"submit",disabled:r,children:t("save")})]})})]})})})})}),N&&!g&&(0,o.jsx)(n.u_,{visible:!0,onClose:()=>b(!0),style:{minWidth:500},children:(0,o.jsx)(I,{contentText:Q,isLoading:!1,relations:N,deleteConfirmation:e=>v(e),keys:["menus"],onClose:()=>b(!0),onDelete:e=>(async(e,t)=>{await W(e,t)})(e)})})]})}):(0,o.jsxs)(n.rj,{gutter:0,children:[(0,o.jsx)(n.Od,{parts:["header"],className:"pt-10"}),(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField","labelField","labelField"]})})]})},xe=({item:e})=>{var t,s,l,r;const{t:c}=(0,n.$G)(),u=(0,n.h_)(d.pH.MENU),m=(0,i.k6)(),[h,x]=(0,a.useState)(!1),[p,j]=(0,a.useState)(""),[g,b]=(0,a.useState)(!1),{register:y,handleSubmit:v,watch:N,getValues:_,formState:{errors:C},control:w}=(0,f.cI)({defaultValues:{name:e.name,price:e.price,description:e.description,needs_cutlery:e.needs_cutlery,guest_view:e.guest_view,raw_food:e.raw_food,image:e.image},resolver:(0,Z.X)(d.f6)}),[E,I]=(0,a.useState)(null),U=a.useMemo((()=>e.image),[e]),[S,Q]=(0,a.useState)(!1),[F,W]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=N(((e,{name:t})=>{t&&W(!0)}));return()=>e.unsubscribe()}),[N]),(0,a.useEffect)((()=>{(async()=>{const t=await u.get(`/products/upload/presign-url?imagekey=${e.image}`);I(t.data)})()}),[]);return(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)("div",{children:(0,o.jsx)(n.ZT,{h2:!0,children:e.name})}),children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{offset:3,size:6,children:(0,o.jsxs)("form",{onSubmit:v((async t=>{j(""),x(!0);try{const s={name:t.name,price:Number(t.price),description:t.description,needs_cutlery:t.needs_cutlery,guest_view:t.guest_view,raw_food:t.raw_food,image:U};g&&t.image&&await T()({method:"PUT",url:E.url,data:t.image}),await u.put(`/products/type/general/${e.id}`,s),m.push(`/menu/item/view/${e.id}`)}catch(p){j(p.response.data.message)}finally{x(!1)}})),children:[(0,o.jsx)(n.NI,{label:c("item_name"),children:(0,o.jsx)(n.II,Object.assign({"data-testid":"input-item-name",placeholder:c("enter_item_name")},y("name"),{error:null==(t=C.name)?void 0:t.message}))}),(0,o.jsx)(n.NI,{label:c("item_price"),children:(0,o.jsx)(n.II,Object.assign({type:"number",step:".01",prefixNode:"$",placeholder:"0.00"},y("price"),{error:null==(s=C.price)?void 0:s.message}))}),(0,o.jsx)(n.NI,{label:c("item_description"),children:(0,o.jsx)(n.II,Object.assign({placeholder:c("enter_item_description")},y("description"),{error:null==(l=C.description)?void 0:l.message}))}),(0,o.jsx)(n.NI,{children:(0,o.jsx)(n.XZ,Object.assign({},y("needs_cutlery"),{label:c("needs_cutlery")}))}),(0,o.jsx)(n.NI,{label:"",children:(0,o.jsx)(n.XZ,Object.assign({},y("guest_view"),{label:c("guest_view")}))}),(0,o.jsx)(n.NI,{children:(0,o.jsx)(n.XZ,Object.assign({},y("raw_food"),{label:c("raw_food")}))}),(0,o.jsxs)(n.NI,{label:c("image"),children:[!g&&(0,o.jsx)(n.rU,{target:"_blank",href:`${null==e?void 0:e.image_base_url}/image/400x400/${null==e?void 0:e.image}`,children:(0,o.jsx)(n.Ee,{src:`${null==e?void 0:e.image_base_url}/image/400x400/${null==e?void 0:e.image}`,alt:null==e?void 0:e.image,width:100,height:100})}),(0,o.jsx)(ie,Object.assign({},y("image"),{onChange:e=>{y("image").onChange(e),b(!!e.target.value)},error:null==(r=C.image)?void 0:r.message}))]}),p&&(0,o.jsx)("div",{className:"mt-20",children:(0,o.jsx)(n.Bc,{error:p})}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsx)(n.X2,{children:(0,o.jsxs)("div",{className:"form-bottom-action",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>{var t;t=`/menu/item/view/${e.id}`,console.log("-====> ",t),F?Q(!0):m.push(t)},children:c("cancel")}),(0,o.jsx)(n.zx,{"data-testid":"item-submit",variant:"primary",type:"submit",disabled:h,children:c("save")})]})})]})}),(0,o.jsx)(n.RZ,{modal:S,setModal:Q,onLeave:()=>m.push("/menu/item/list")})]})})})})})},pe=({item:e})=>{const{t}=(0,n.$G)(),s=(0,n.h_)(d.pH.MENU),l=(0,i.k6)(),[r,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),[h,x]=(0,a.useState)([]),[p,j]=(0,a.useState)(),{register:g,handleSubmit:b,formState:{errors:y}}=(0,f.cI)();(0,a.useEffect)((()=>{(async()=>{const e=await s.get("/modifiers");j(e.data)})(),x(e.modifiers)}),[]);return(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(n.ZT,{h2:!0,children:t("add_modifiers_to_item")}),children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{offset:3,size:6,children:(0,o.jsxs)("form",{onSubmit:b((async()=>{const t={modifiers:h.map((e=>e.id))};try{await s.put(`/products/type/modifiers/${e.id}`,t),l.push(`/menu/item/view/${e.id}`)}catch(a){a.response.data&&m(a.response.data.message)}finally{c(!1)}})),children:[0===(null==(v=(null==p?void 0:p.payload)||[])?void 0:v.length)?(0,o.jsx)(n.ZT,{muted:!0,children:t("no_modifiers_found")}):((null==p?void 0:p.payload)||[]).map((e=>{return(0,o.jsx)(n.NI,{children:(0,o.jsx)("div",{children:(0,o.jsx)(n.XZ,{name:e.name,label:e.name,checked:(t=e.id,!!h.find((e=>e.id===t))),onChange:()=>(e=>{const t={id:e.id,name:e.name},s=h.find((e=>e.id===t.id));return x(s?(h||[]).filter((e=>e.id!==t.id)):[...h,t])})(e)})})},e.id);var t})),u&&(0,o.jsx)("div",{className:"mt-20",children:(0,o.jsx)(n.Bc,{error:u})}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsx)(n.X2,{children:(0,o.jsxs)("div",{className:"form-bottom-action",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>{l.push(`/menu/item/view/${e.id}`)},children:t("cancel")}),(0,o.jsx)(n.zx,{"data-testid":"item-submit",variant:"primary",type:"submit",disabled:r,children:t("save")})]})})]})})})})})})});var v};let je;!function(e){e.CATEGORY="category",e.GENERAL_INFORMATION="general-information",e.MODIFIER="modifier"}(je||(je={}));const ge=()=>{const{can:e}=(0,a.useContext)(n.Il),{t}=(0,n.$G)(),s=(0,n.h_)(d.pH.MENU),l=(0,i.UO)(),[r,c]=(0,a.useState)(),[u,m]=(0,a.useState)(!0);(0,a.useEffect)((()=>{(async()=>{const e=await s.get(`/products/${l.id}`);c(e.data),m(!1)})()}),[l.id]);return e(d.g3.MENU.CAN_GET_ITEM)?u?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField","labelField","labelField"]})})}):null!=r&&r.payload?((e,s)=>{switch(e){case je.GENERAL_INFORMATION:return(0,o.jsx)(xe,{item:s});case je.CATEGORY:return(0,o.jsx)(he,{item:s});case je.MODIFIER:return(0,o.jsx)(pe,{item:s})}return(0,o.jsx)(o.Fragment,{children:t("not_found")})})(l.type,null==r?void 0:r.payload):(0,o.jsx)(o.Fragment,{}):((0,n.hi)("You have no permissions to view this item.",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/item/list"}))};var be=s(475);const ye=(e,t)=>{const{can:s}=(0,a.useContext)(n.Il),{t:l}=(0,n.$G)(),r=(0,i.k6)(),c=s(d.g3.MENU.CAN_UPDATE_ITEM);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:e}),c&&(0,o.jsx)(n.rU,{component:n.Xd,onClick:()=>r.push(t),children:l("edit")})]})},ve=e=>e?"Yes":"No",Ne=({item:e})=>{const{t}=(0,n.$G)();return(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:ye("General information",`/menu/item/manage/${je.GENERAL_INFORMATION}/${null==e?void 0:e.id}`),children:(0,o.jsx)(n.X2,{className:"mt-30",gutterY:0,children:(0,o.jsxs)("div",{className:"ui-flex",children:[(0,o.jsx)("div",{className:"mr-30",children:(0,o.jsx)(n.Ee,{src:`${null==e?void 0:e.image_base_url}/image/400x400/${null==e?void 0:e.image}`,alt:null==e?void 0:e.image,width:100,height:100})}),(0,o.jsxs)(n.X2,{cols:1,className:"mt-0",children:[(0,o.jsxs)(n.sg,{className:"mt-0",children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:t("name")}),(0,o.jsx)(n.ZT,{children:null==e?void 0:e.name})]}),(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:t("price")}),(0,o.jsxs)(n.ZT,{children:["$",null==e?void 0:e.price]})]}),(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:t("description")}),(0,o.jsx)(n.ZT,{children:null==e?void 0:e.description})]}),(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:t("needs_cutlery")}),(0,o.jsx)(n.ZT,{"data-testid":"menu-item-needs_cutlery",children:ve(null==e?void 0:e.needs_cutlery)})]}),(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:t("guest_view")}),(0,o.jsx)(n.ZT,{"data-testid":"menu-item-guest_view",children:ve(null==e?void 0:e.guest_view)})]}),(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:t("raw_food")}),(0,o.jsx)(n.ZT,{"data-testid":"menu-item-raw_food",children:ve(null==e?void 0:e.raw_food)})]})]})]})})})},_e=({item:e})=>(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:ye("Categories",`/menu/item/manage/${je.CATEGORY}/${e.id}`),children:e.categories.map(((e,t)=>(0,o.jsx)(n.ZT,{"data-testid":`menu-item-subcategory-${t}`,size:"large",p:!0,className:"mb-5",children:e.name},`menu-item-subcategory-${t}`)))}),fe=e=>(0,o.jsx)(n.sg,{children:null==e?void 0:e.map((e=>(0,o.jsx)(n.ZT,{size:"large",p:!0,className:"mb-5",children:e.name},e.id)))}),Ze=({item:e})=>{var t;return(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:ye("Modifiers",`/menu/item/manage/${je.MODIFIER}/${e.id}`),children:e&&null!=(t=e.modifiers)&&t.length?fe(e.modifiers):(0,o.jsx)(n.ZT,{muted:!0,size:"large",p:!0,className:"mb-5",children:"No Modifiers"})})},Ce=e=>(0,o.jsx)(n.sg,{children:null==e?void 0:e.map((e=>{var t;return(0,o.jsxs)(n.ZT,{size:"large",p:!0,className:"mb-5",children:[null==(t=e.hub)?void 0:t.name," - ",(0,k.lm)(e.available_at,!0)]},e.id)}))}),we=({item:e,refetchItem:t})=>{var s;const{t:i}=(0,n.$G)(),[l,r]=(0,a.useState)(),[d,c]=(0,a.useState)(!1);return(0,o.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:"Out of Stock"}),(0,o.jsx)(n.rU,{component:n.Xd,onClick:()=>{r({resource:"item",id:e.id,name:e.name}),c(!0)},children:i("edit")})]}),children:[e&&null!=(s=e.out_of_stock)&&s.length?Ce(e.out_of_stock):(0,o.jsx)(n.ZT,{muted:!0,size:"large",p:!0,className:"mb-5",children:"No Out of Stock Information"}),l&&(0,o.jsx)(n.u_,{visible:d,onClose:()=>c(!1),style:{minWidth:780},children:(0,o.jsx)(z,{onSubmitSuccess:()=>t(),meta:l,onClose:()=>c(!1)})})]})},Ee=e=>{const{t}=(0,n.$G)(),s=(0,n.h_)(d.pH.MENU),[i,l]=(0,a.useState)(),[r,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)();return(0,a.useEffect)((()=>{(async()=>{try{const t=await s.get(`/products/${e.meta.id}/relations`);l(t.data)}catch(t){c(!1)}finally{c(!1)}})()}),[]),(0,o.jsx)(n.u_,{visible:!0,onClose:e.onClose,style:{minWidth:500},children:(0,o.jsx)(I,{title:t("item"),isLoading:r,relations:i,deleteConfirmation:e=>m(e),keys:["menus"],onClose:e.onClose,onDelete:async()=>{try{await s.delete(`/products/${e.meta.id}`,{data:{confirmation:u}}),e.onDelete()}catch(t){console.log(t)}finally{c(!1)}}})})},Ie=()=>{var e;const{can:t}=(0,a.useContext)(n.Il),s=(0,n.h_)(d.pH.MENU),l=(0,i.k6)(),{id:r}=(0,i.UO)(),[c,u]=(0,a.useState)(),[m,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)(),j=t(d.g3.MENU.CAN_DELETE_ITEM),g=async()=>{try{h(!0);const e=await s.get(`/products/${r}`);u(e.data),h(!1)}catch(e){}};return(0,a.useEffect)((()=>{g()}),[r]),t(d.g3.MENU.CAN_GET_ITEM)?m?(0,o.jsx)(n.rj,{gutter:0,className:"menu-container",children:(0,o.jsx)(n.X2,{children:(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField"]})}),(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField"]})}),(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField"]})})]})})}):(0,o.jsxs)(n.rj,{gutter:0,className:"menu-container",children:[(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsxs)("div",{className:"w-100 ui-flex between v-center pl-30 pr-20 pt-10",children:[(0,o.jsx)(n.ZT,{h2:!0,children:null==c||null==(e=c.payload)?void 0:e.name}),j&&(0,o.jsx)(n.Lt,{renderTrigger:(e,t)=>(0,o.jsx)(n.zx,{size:"small",variant:"ghost",ref:t,onClick:e,iconOnly:!0,children:(0,o.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,o.jsx)("div",{className:"ui-flex column network-action-dropdown",children:(0,o.jsx)("div",{children:(0,o.jsxs)(n.zx,{className:"w-100",variant:"danger-ghost",muted:!0,onClick:()=>{r&&p({resource:"items",id:r})},children:[(0,o.jsx)(n.JO,{type:"Delete",size:20,className:"mr-10"}),(0,be.t)("delete")]})})})})]})})}),(0,o.jsx)(n.X2,{children:(0,o.jsxs)(n.sg,{children:[(null==c?void 0:c.payload)&&(0,o.jsx)(Ne,{item:null==c?void 0:c.payload}),(null==c?void 0:c.payload)&&(0,o.jsx)(we,{refetchItem:g,item:null==c?void 0:c.payload}),(null==c?void 0:c.payload)&&(0,o.jsx)(_e,{item:null==c?void 0:c.payload}),(null==c?void 0:c.payload)&&(0,o.jsx)(Ze,{item:null==c?void 0:c.payload})]})}),x&&(0,o.jsx)(Ee,{meta:x,onClose:()=>p(void 0),onDelete:()=>{(0,n.hi)("Product deleted successfully",{type:"success"}),l.push("/menu/item/list")}})]}):((0,n.hi)("You have no permissions to view this item.",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/item/list"}))},Ue=()=>{var e,t;const{can:s}=(0,a.useContext)(n.Il),{t:l}=(0,n.$G)(),r=(0,n.h_)(d.pH.MENU),h=(0,i.k6)(),[x,p]=(0,a.useState)(),[j,g]=(0,a.useState)(1),[y,v]=(0,a.useState)(""),[N,_]=(0,a.useState)(!0),f=c(y),Z=s(d.g3.MENU.CAN_GET_MODIFIERS),C=s(d.g3.MENU.CAN_CREATE_MODIFIER),w=s(d.g3.MENU.CAN_UPDATE_MODIFIER),E=async e=>{const t=await r.get(f?`/modifiers?name=${f}&page=${e}`:`/modifiers?page=${e}`);p(t.data),g(e),_(!1)};return(0,a.useEffect)((()=>{Z&&E(1)}),[]),(0,n.N7)((()=>{E(1)}),[f]),Z?N?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","filterTable"]})})}):(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:"Modifiers List"}),C&&(0,o.jsx)(n.zx,{onClick:()=>h.push("/menu/modifier/editor"),children:l("create")})]}),children:[(0,o.jsx)("div",{className:"menu-toolbar",children:(0,o.jsx)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:(0,o.jsx)(n.Vr,{value:y,placeholder:l("search"),onChange:e=>v(e.target.value)})})}),(0,o.jsxs)(n.iA,{children:[(0,o.jsx)(n.ss,{children:(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{as:"th",children:l("name")}),(0,o.jsx)(n.pj,{as:"th",children:l("options")}),(0,o.jsx)(n.pj,{as:"th",style:{width:50}})]})}),(0,o.jsx)(n.RM,{children:null==x||null==(e=x.payload)?void 0:e.map((e=>{var t;return(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.rU,{size:"medium",component:i.rU,to:`/menu/modifier/view/${e.id}`,children:e.name})}),(0,o.jsx)(n.pj,{children:null==(t=e.options)?void 0:t.map((e=>e.name)).join(" / ")}),(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.Lt,{renderTrigger:(e,t)=>(0,o.jsx)(n.Kk,{onClick:e,ref:t,children:(0,o.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,o.jsxs)("div",{className:"ui-flex column",style:{width:160},children:[(0,o.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>h.push(`/menu/modifier/view/${e.id}`),leftIcon:(0,o.jsx)(n.JO,{type:"EyeOpen",size:18}),children:l("view")}),w&&(0,o.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>{h.push(`/menu/modifier/manage/${e.id}`)},leftIcon:(0,o.jsx)(n.JO,{type:"Pen01",size:18}),children:l("edit")})]})})})]},e.id)}))})]}),null!=x&&x.payload&&!((null==x||null==(t=x.payload)?void 0:t.length)<1)||N?(0,o.jsx)(n.tl,{className:"ui-flex end mt-20",pages:b(Number(null==x?void 0:x.total)),current:j,onPageChange:E}):(0,o.jsx)("div",{children:(0,o.jsx)(u,{})})]})})})}):(0,o.jsx)(m,{entity:"Modifiers"})};let Se={};const Qe=({itemEditing:e,categoryId:t,menuState:s,activeTab:i,close:l,onSave:r})=>{var d;const{t:c}=(0,n.$G)(),[u,m]=(0,a.useState)({}),[h,x]=(0,a.useState)(e.suggested_items||[]),[p,j]=(0,a.useState)(!1),[g,b]=(0,a.useState)(""),[y,v]=(0,a.useState)(e.is_popular||!1),[N,_]=(0,a.useState)(e.is_favorite||!1),[f,Z]=(0,a.useState)({price:e.price,base_price:e.base_price,hasNewPrice:e.price&&Number(e.price)!==Number(e.base_price)}),[C,w]=(0,a.useState)(null);(0,a.useEffect)((()=>{const e={};Object.keys(s.addedItems[t].subcategories).forEach((a=>{Object.keys(s.addedItems[t].subcategories[a].items).forEach((i=>{e[i]=s.addedItems[t].subcategories[a].items[i]}))})),Se=e,m(e)}),[s.addedItems]);return(0,o.jsxs)("div",{className:"ui-flex w-100 column",children:[(0,o.jsx)(n.ZT,{h2:!0,children:e.name}),(0,o.jsx)(n.rj,{className:"mt-30",gutter:0,children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.XZ,{label:c("is_popular"),checked:y,onChange:e=>{v(e.target.checked)}})}),(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.XZ,{label:c("is_favorite"),checked:N,onChange:e=>{_(e.target.checked)}})})]})}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsx)(n.ZT,{className:"mb-20",p:!0,children:c("item_price")}),(0,o.jsxs)("div",{className:"ui-flex v-center",children:[(0,o.jsxs)(n.ZT,{className:G()("mr-10",{"ui-text-line":f.hasNewPrice}),muted:f.hasNewPrice,children:["$",Number(f.base_price).toFixed(2)]}),f.hasNewPrice&&(0,o.jsxs)(n.ZT,{className:"mr-20",children:["$",null==(d=Number(f.price))?void 0:d.toFixed(2)]}),p?(0,o.jsxs)("div",{className:"ui-flex v-center",children:[(0,o.jsx)(n.II,{style:{width:100},placeholder:"$0.00",step:1,min:"0.00",type:"number",error:C||"",onChange:e=>{b(e.currentTarget.value),w(null)}}),(0,o.jsx)(n.rU,{className:"ml-10",component:n.Xd,onClick:()=>{Number(g)===e.price?w(c("same_price_error")):Number(g)<(e.base_price||e.price)?w(c("lower_price_error")):(Z({price:Number(g),base_price:Number(e.base_price)||Number(e.price),hasNewPrice:(Number(e.base_price)||Number(e.price))!==Number(g)}),j(!1))},size:"medium",children:c("save")})]}):(0,o.jsx)(n.rU,{component:n.Xd,onClick:()=>j(!0),size:"medium",children:c("edit")})]}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsx)(n.ZT,{className:"mb-30",p:!0,children:c("sugessted_items")}),(0,o.jsxs)("div",{className:"menu-item-suggested-list ui-flex column v-start",children:[h.length>0?(0,o.jsx)("div",{className:"menu-selected-chips",children:h.map((e=>u[e]?(0,o.jsx)(n.Af,{onClose:()=>(e=>{x(h.filter((t=>t!==e)))})(e),children:u[e].name},e):null))}):(0,o.jsx)(n.ZT,{muted:!0,children:c("no_sugessted_items")}),(0,o.jsx)("div",{className:"mb-20"}),(0,o.jsx)(n.iz,{vertical:15}),(0,o.jsx)(n.Vr,{className:"mb-20",placeholder:c("search"),onChange:e=>{const t={};Object.values(Se).forEach((s=>{s.name.toLowerCase().includes(e.currentTarget.value.toLowerCase())&&(t[s.id]=s)})),m(t)}}),(0,o.jsx)("div",{className:"menu-suggested-chips w-100 ui-flex column v-start pl-10",children:Object.values(u).map(((t,s)=>t.id===e.id||h.includes(t.id)?null:(0,o.jsxs)("div",{className:"menu-select-chip-wrapper w-100",children:[(0,o.jsx)(n.iz,{vertical:15}),(0,o.jsxs)("div",{className:"w-100 ui-flex v-center between",children:[(0,o.jsx)(n.ZT,{className:"mr-20",children:t.name}),(0,o.jsx)(n.zx,{onClick:()=>{return e=t.id,void x([...h||[],e]);var e},size:"small",variant:"ghost",iconOnly:!0,children:(0,o.jsx)(n.JO,{type:"Plus",size:20})})]})]},t.id)))})]}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsxs)("div",{className:"ui-flex end",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:l,size:"medium",children:c("cancel")}),(0,o.jsx)(n.zx,{className:"ml-10",size:"medium",onClick:()=>{delete e.price,r(Object.assign({},e,f.hasNewPrice&&f.price?{price:f.price}:{},{base_price:f.base_price,subcategory:i,category:t,suggested_items:h,is_favorite:N,is_popular:y}))},children:c("save")})]})]})},Fe=({subcategories:e,onTabClick:t,activeTab:s,onReorder:i,sortedSubcategoriesInput:l})=>{const[r,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(l);(0,a.useEffect)((()=>{h(l)}),[l]);const x=e=>{e.dataTransfer.setData("text/plain",e.currentTarget.id);const t=e.currentTarget.getAttribute("data-order");setTimeout((()=>{d(t)}),0)},p=e=>{e.currentTarget.getAttribute("data-order")&&u(e.currentTarget.getAttribute("data-order")),e.preventDefault(),e.stopPropagation()},j=e=>{e.preventDefault(),u(null),d(null)},g=()=>{if(r){const e=parseInt(r)-1,t=[...l],s=t.splice(e,1);t.splice(0,0,s[0]),h(t),i(t)}u(null),d(null)},b=()=>{if(r&&c){let e=parseInt(r),t=parseInt(c);e>t?e-=1:(e-=1,t-=1);const s=[...l],a=s.splice(e,1);s.splice(t,0,a[0]),h(s),i(s)}u(null),d(null)};return(0,o.jsx)("div",{className:"menu-ordered-list ui-border-right p-10",children:m.length&&m.map(((i,l)=>{const d=Object.assign({},e[i]);return d.sort_order=l+1,(0,o.jsxs)(a.Fragment,{children:[0===l&&(0,o.jsx)("div",{onDragOverCapture:p,onDrop:g,className:G()("w-100 menu-drop-indicator ui-rounded",{active:!!r&&`${d.sort_order}`===c&&`${d.sort_order}`!==r})}),(0,o.jsxs)(n.Xd,{className:G()("ui-flex w-100 px-10 menu-sub-order-item ui-rounded",{"drag-active":!!c&&c!==`${d.sort_order}`&&r===`${d.sort_order}`,active:s===i}),draggable:!0,onDragStartCapture:x,onDragOverCapture:p,onDragEnd:j,onDrop:b,"data-order":d.sort_order,"data-id":i,onClick:t,children:[(0,o.jsx)(n.JO,{type:"Drag",size:30,className:"mr-10"}),d.name]}),(0,o.jsx)("div",{onDragOverCapture:p,onDrop:b,className:G()("w-100 menu-drop-indicator ui-rounded",{active:!!r&&`${d.sort_order}`===c&&`${d.sort_order}`!==r})})]},i)}))})},We=({className:e,categoryId:t,updateItems:s,removeItem:i,addItem:l,reorderSubcategory:r,menuState:d,itemEdit:c})=>{var u;const{t:m}=(0,n.$G)(),[h,x]=(0,a.useState)({}),[p,j]=(0,a.useState)(null),[g,b]=(0,a.useState)(null),[y,v]=(0,a.useState)([]),[N,_]=(0,a.useState)({}),[f,Z]=(0,a.useState)([]);(0,a.useEffect)((()=>{const e=Object.keys(d.categories[t].subcategories).sort(((e,s)=>d.categories[t].subcategories[e].sort_order-d.categories[t].subcategories[s].sort_order));j(e[0])}),[]),(0,a.useEffect)((()=>{var e;const s=Object.keys(d.categories[t].subcategories).sort(((e,s)=>d.categories[t].subcategories[e].sort_order-d.categories[t].subcategories[s].sort_order));_((null==(e=d.categories[t])?void 0:e.subcategories)||{}),Z(s)}),[t,d]),(0,a.useEffect)((()=>{var e,s,a,i;p&&(v((null==(e=d.categories[t])||null==(s=e.subcategories[p])?void 0:s.items)||[]),x((null==(a=d.addedItems[t])||null==(i=a.subcategories[p])?void 0:i.items)||{}))}),[p,d.addedItems]);const C=e=>{const s=e.currentTarget.getAttribute("data-id");s&&p&&i(Object.assign({},h[s],{subcategory:p,category:t}))};return(0,o.jsxs)(n.zF,{title:d.categories[t].name,className:e,open:!0,children:[(0,o.jsxs)("div",{className:"ui-flex",children:[(0,o.jsx)(Fe,{onReorder:e=>{r({category:t,subcategories:e})},sortedSubcategoriesInput:f,onTabClick:e=>{const t=e.currentTarget.getAttribute("data-id");t&&j(t)},activeTab:p||"",subcategories:N}),(0,o.jsx)("div",{className:"p-20 w-100",children:p&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:null==(u=d.categories[t].subcategories[p])?void 0:u.name}),(0,o.jsx)(n.ZT,{size:"large",className:"ui-flex mt-30 mb-20",children:m("added_items")}),(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{colsLg:2,colsXl:3,colsXxl:4,gutter:5,children:(Object.keys(h)||[]).length>0?Object.keys(h).map((e=>{var t,s,a;const i=h[e],l=i.price&&i.price!==i.base_price;return(0,o.jsx)(n.sg,{children:(0,o.jsxs)("div",{className:"ui-rounded p-10 ui-flex w-100 ui-border",children:[(0,o.jsx)(n.Ee,{alt:i.name,src:`${null==i?void 0:i.image_base_url}/image/400x400/${i.image}`,width:57,height:57,className:"menu-item-card-image ui-rounded mr-10"}),(0,o.jsxs)("div",{className:"menu-item-card-content w-100 ui-flex between column",children:[(0,o.jsxs)("div",{className:"menu-item-card-header ui-flex between v-start",children:[(0,o.jsx)(n.ZT,{size:"large",children:i.name}),(0,o.jsx)(n.Xd,{"data-id":i.id,onClick:C,children:(0,o.jsx)(n.JO,{type:"Close",size:20})})]}),(0,o.jsxs)("div",{className:"menu-item-card-body",children:[(0,o.jsxs)(n.ZT,{className:G()("mt-10 pr-5",{"ui-text-line":l}),muted:l,children:["$",Number(i.base_price).toFixed(2)]}),l&&(0,o.jsxs)(n.ZT,{className:"mt-10",children:["$",null==(t=Number(i.price))?void 0:t.toFixed(2)]})]}),(0,o.jsxs)("div",{className:"menu-item-card-footer ui-flex between w-100 v-end",children:[c&&(0,o.jsxs)(n.ZT,{muted:!0,children:[null!=(s=i.suggested_items)&&s.length?null==(a=i.suggested_items)?void 0:a.length:m("no")," ",m("sugessted_items")]}),c&&(0,o.jsx)(n.rU,{component:n.Xd,onClick:()=>(e=>{b(e)})(i),size:"medium",children:m("edit")})]})]})]})},i.id)})):(0,o.jsx)(n.ZT,{muted:!0,children:m("no_items_added")})})}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsx)(n.ZT,{size:"large",className:"ui-flex mb-30",children:m("add_items")}),(0,o.jsxs)(n.iA,{children:[(0,o.jsx)(n.ss,{children:(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{as:"th",style:{width:50}}),(0,o.jsx)(n.pj,{as:"th",style:{width:60}}),(0,o.jsx)(n.pj,{as:"th",style:{width:250},children:m("item_name")}),(0,o.jsx)(n.pj,{as:"th",children:m("price")})]})}),(0,o.jsx)(n.RM,{children:Object.keys(h).length!==y.length?y.map((e=>{var s;return h[e.id]?null:(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.Kk,{onClick:()=>l(Object.assign({},e,{price:null,base_price:e.price,subcategory:p,subcategory_name:d.categories[t].subcategories[p].name,category:t})),children:(0,o.jsx)(n.JO,{type:"Plus",size:20})})}),(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.Ee,{alt:e.name,src:`${null==e?void 0:e.image_base_url}/image/400x400/${e.image}`,width:35,height:35})}),(0,o.jsx)(n.pj,{children:e.name}),(0,o.jsxs)(n.pj,{children:["$",null==(s=Number(e.price))?void 0:s.toFixed(2)]})]},e.id)})):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{style:{height:45},colSpan:4,className:"text-center py-10",children:(0,o.jsx)(n.ZT,{muted:!0,children:m("no_more_items_to_add")})})})})]})]})})]}),(0,o.jsx)(n.u_,{visible:g,onClose:()=>b(null),style:{width:500},children:g&&(0,o.jsx)(Qe,{itemEditing:g,menuState:d,categoryId:t,activeTab:p,close:()=>b(null),onSave:e=>{s(e),b(null)}})})]})};const ze=function(e,t){switch(t.type){case"add-item":var s,a,i,n;return Object.assign({},e,{addedItems:Object.assign({},e.addedItems,{[t.payload.category]:Object.assign({},e.addedItems[t.payload.category],{subcategories:Object.assign({},null==(s=e.addedItems[t.payload.category])?void 0:s.subcategories,{[t.payload.subcategory]:Object.assign({},null==(a=e.addedItems[t.payload.category])?void 0:a.subcategories[t.payload.subcategory],{items:Object.assign({},null==(i=e.addedItems[t.payload.category])||null==(n=i.subcategories[t.payload.subcategory])?void 0:n.items,{[t.payload.id]:t.payload})})})})})});case"remove-item":var l,r,d,c,o;if(null==(l=e.addedItems[t.payload.category])||(null==(r=l.subcategories[t.payload.subcategory])||delete r.items[t.payload.id]),0===Object.keys((null==(d=e.addedItems[t.payload.category])||null==(c=d.subcategories[t.payload.subcategory])?void 0:c.items)||{}).length)null==(o=e.addedItems[t.payload.category])||delete o.subcategories[t.payload.subcategory];return Object.keys(e.addedItems).forEach((s=>{const a=e.addedItems[s].subcategories;Object.keys(a).forEach((e=>{const s=a[e].items;Object.keys(s).forEach((e=>{var a;s[e].suggested_items&&(s[e].suggested_items=null==(a=s[e].suggested_items)?void 0:a.filter((e=>e!==t.payload.id)),s[e].suggested_items.length||delete s[e].suggested_items)}))}))})),Object.assign({},e);case"add-update-item":var u,m,h,x;return Object.assign({},e,{addedItems:Object.assign({},e.addedItems,{[t.payload.category]:Object.assign({},e.addedItems[t.payload.category],{subcategories:Object.assign({},null==(u=e.addedItems[t.payload.category])?void 0:u.subcategories,{[t.payload.subcategory]:Object.assign({},null==(m=e.addedItems[t.payload.category])?void 0:m.subcategories[t.payload.subcategory],{items:Object.assign({},null==(h=e.addedItems[t.payload.category])||null==(x=h.subcategories[t.payload.subcategory])?void 0:x.items,{[t.payload.id]:t.payload})})})})})});case"reorder-subcategory":return t.payload.subcategories.forEach(((s,a)=>{var i;e.categories[t.payload.category].subcategories[s].sort_order=a+1,null!=(i=e.addedItems[t.payload.category])&&i.subcategories[s]&&(e.addedItems[t.payload.category].subcategories[s].sort_order=a+1)})),Object.assign({},e);case"set-menu":return t.payload;default:throw new Error}},Le=e=>{const t={subcategories:{}},s=[];return Object.keys(e.addedItems).forEach((a=>{t.subcategories=Object.assign({},t.subcategories,e.addedItems[a].subcategories),Object.keys(e.addedItems[a].subcategories).forEach((t=>{Object.keys(e.addedItems[a].subcategories[t].items).forEach((i=>{const n=e.addedItems[a].subcategories[t].items[i];s.push({product_id:n.id,price:n.price,category_id:+t,is_popular:n.is_popular,is_favorite:n.is_favorite,suggested_items:n.suggested_items,sort_order:e.addedItems[a].subcategories[t].sort_order})}))})),0===Object.keys(e.addedItems[a].subcategories).length&&delete t.subcategories[a]})),s};var Oe=s(74272),Te=s.n(Oe),Me={};Me.styleTagTransform=K(),Me.setAttributes=Y(),Me.insert=R().bind(null,"head"),Me.domAPI=V(),Me.insertStyleElement=P();B()(Te(),Me);Te()&&Te().locals&&Te().locals;const ke=()=>{var e,t;const[s,l]=(0,a.useReducer)(ze,{addedItems:{},itemsToSelect:{},categories:{},loading:!0,error:null}),{can:m}=(0,a.useContext)(n.Il),{t:h}=(0,n.$G)(),x=(0,n.h_)(d.pH.MENU),p=[{name:"hotel",queryParamName:"hotelIds",data:async()=>{var e,t;const s=await x.get("/external/relation/hotels"),a=[];return null==s||null==(e=s.data)||null==(t=e.payload)||t.forEach((e=>{a.push({label:e.name,queryParamValue:`${e.id||""}`})})),a}}],j=(0,i.k6)(),[g,b]=(0,a.useState)(),[y,v]=(0,a.useState)([]),[N,_]=(0,a.useState)(""),[f,Z]=(0,a.useState)(""),[C,w]=(0,a.useState)(!0),E=c(f),[I,U]=(0,a.useState)(!1),[S,Q]=(0,a.useState)(""),[F,W]=(0,a.useState)(1),z=m(d.g3.MENU.CAN_BATCH_EDIT_MENU);(0,a.useEffect)((()=>{_(j.location.search)}),[]);const L=async e=>{const t=r().parse(j.location.search.replace("?","").replace(/\|([^&]*)&?/g,"&")),s=decodeURIComponent(r().stringify(t)).replace(/\|([^&]*)&?/g,"&"),a=await x.get(E?`?name=${E}&${s}&page=${e}`:`/?page=${e}&${s}`);b(a.data),w(!1),W(e)};(0,a.useEffect)((()=>{L(1)}),[N,E]);(0,a.useEffect)((()=>{(async()=>{try{const e=await x.get("/products?categorized=true");l({type:"set-menu",payload:{addedItems:{},categories:e.data.payload,loading:!1}})}catch(S){l({type:"set-menu",payload:{error:S.message,loading:!1}})}})()}),[]);const O=e=>{l({type:"add-update-item",payload:e})},T=e=>{l({type:"remove-item",payload:e})},M=e=>{l({type:"add-item",payload:e})},k=e=>{l({type:"reorder-subcategory",payload:e})};return z?C?(0,o.jsxs)(n.rj,{gutter:0,children:[(0,o.jsx)(n.Od,{parts:["header"],className:"pt-10"}),(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","block"]})}),(0,o.jsx)(n.Zb,{className:"mt-20",page:!0,children:(0,o.jsx)(n.Od,{parts:["filterTable-2"]})})]}):(0,o.jsxs)(n.rj,{gutter:0,children:[(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(n.ZT,{h2:!0,children:h("batch_edit_menus")})}),children:[(0,o.jsx)("div",{className:"menu-toolbar mb-10",children:(0,o.jsxs)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:[(0,o.jsx)(n.x$,{columns:p,onChange:e=>{_(e),j.push(`?${e}`)},filtersString:N}),(0,o.jsx)(n.Vr,{value:f,placeholder:h("search"),onChange:e=>Z(e.target.value)})]})}),(0,o.jsxs)(n.iA,{children:[(0,o.jsx)(n.ss,{children:(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{as:"th",style:{width:50}}),(0,o.jsx)(n.pj,{as:"th",children:h("menu")})]})}),(0,o.jsx)(n.RM,{children:null==g||null==(e=g.payload)?void 0:e.map((e=>(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.XZ,{onChange:()=>{(e=>{if(e)y.includes(e)?v((y||[]).filter((t=>t!==e))):v([...y,e])})(e.id)},checked:y.includes(e.id||"")},e.id)}),(0,o.jsx)(n.pj,{children:null==e?void 0:e.name})]},e.id)))})]}),null!=g&&g.payload&&!((null==g||null==(t=g.payload)?void 0:t.length)<1)||C?(0,o.jsx)(n.tl,{className:"ui-flex end mt-20",pages:(0,d.gc)(Number(null==g?void 0:g.total)),current:F,onPageChange:L}):(0,o.jsx)("div",{children:(0,o.jsx)(u,{})})]})})}),(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(n.ZT,{h2:!0,children:h("items")}),children:(0,o.jsxs)(n.X2,{cols:1,children:[(0,o.jsxs)(n.sg,{children:[(Object.keys(s.categories)||[]).map((e=>(0,o.jsx)(We,{className:"menu-category-collapsible",categoryId:e,menuState:s,updateItems:O,removeItem:T,addItem:M,reorderSubcategory:k,itemEdit:!1},e))),S&&(0,o.jsx)("div",{className:"mt-20",children:(0,o.jsx)(n.Bc,{error:S})}),(0,o.jsx)(n.iz,{vertical:30})]}),(0,o.jsx)(n.sg,{className:"mt-0",children:(0,o.jsxs)("div",{className:"ui-flex end",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>{j.push("/menu/menu/list")},children:h("cancel")}),(0,o.jsx)(n.zx,{variant:"primary",className:"ml-10",onClick:async()=>{try{U(!0);const e=Le(s);if(0===y.length)throw new Error("Please add at least one menu");if(0===e.length)throw new Error("Please add at least one item of a subcategory");const t={products:e,menu_ids:y};await x.post("/batch-edit",t),j.push("/menu/menu/list")}catch(S){Q(S.message)}finally{U(!1)}},children:h("save")})]})})]})})})})]}):((0,n.hi)("You have no permissions to batch edit menus.",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/menu/list"}))},De=()=>{var e;const{can:t}=(0,a.useContext)(n.Il),{t:s}=(0,n.$G)(),l=(0,n.h_)(d.pH.MENU),r=(0,i.k6)(),[c,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(!1),{register:x,handleSubmit:p,formState:{errors:j},control:g,watch:b}=(0,f.cI)({resolver:(0,Z.X)(d.Vy),defaultValues:{options:[{name:"",price:void 0}]}}),{fields:y,append:v,remove:N}=(0,f.Dq)({control:g,name:"options"}),_=t(d.g3.MENU.CAN_CREATE_MODIFIER),[C,w]=(0,a.useState)(!1),[E,I]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e=b(((e,{name:t})=>{t&&I(!0)}));return()=>e.unsubscribe()}),[b]),_?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(n.ZT,{h2:!0,children:s("create_modifier")}),children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{offset:3,size:6,children:(0,o.jsxs)("form",{onSubmit:p((async e=>{u("");try{h(!0),await l.post("/modifiers",e),r.push("/menu/modifier/list")}catch(t){u(t.message)}finally{h(!1)}})),children:[(0,o.jsx)(n.NI,{label:s("modifier_name"),children:(0,o.jsx)(n.II,Object.assign({"data-testid":"input-modifier-name",placeholder:s("enter_modifier_name")},x("name"),{error:null==(e=j.name)?void 0:e.message}))}),(0,o.jsx)(n.NI,{className:"my-20",children:(0,o.jsx)(n.XZ,Object.assign({"data-testid":"checkbox-modifier-multiselect"},x("multiselect"),{label:s("multiselect")}))}),(y||[]).map(((e,t)=>{var a,i,l,r,d,c;return(0,o.jsxs)("div",{className:"mb-20",children:[(0,o.jsxs)("div",{className:"mb-10 ui-flex v-center between",children:[(0,o.jsxs)(n.ZT,{children:[s("option")," ",t+1]}),1!==y.length&&(0,o.jsx)(n.zx,{variant:"danger-ghost",size:"small",onClick:()=>N(t),iconOnly:!0,children:(0,o.jsx)(n.JO,{type:"Delete",size:18})})]}),(0,o.jsxs)(n.cw,{children:[(0,o.jsx)(n.NI,{label:s("name"),children:(0,o.jsx)(n.II,Object.assign({"data-testid":"modifier-option-name",placeholder:s("enter_option_name")},x(`options.${t}.name`),{error:null==(a=j.options)||null==(i=a[t])||null==(l=i.name)?void 0:l.message}))}),(0,o.jsx)(n.NI,{label:s("price"),children:(0,o.jsx)(n.II,Object.assign({"data-testid":"modifier-option-price",placeholder:"0.00",prefixNode:"$",step:".01"},x(`options.${t}.price`),{error:null==(r=j.options)||null==(d=r[t])||null==(c=d.price)?void 0:c.message}))})]},e.id)]},e.id)})),(0,o.jsx)(n.zx,{"data-testid":"add-option-btn",size:"small",variant:"ghost",onClick:()=>v({name:"",price:void 0}),leftIcon:(0,o.jsx)(n.JO,{type:"Plus",size:14}),children:s("add_option")}),c&&(0,o.jsx)("div",{className:"mt-20",children:(0,o.jsx)(n.Bc,{error:c})}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsx)(n.X2,{children:(0,o.jsxs)("div",{className:"form-bottom-action",children:[(0,o.jsx)(n.zx,{onClick:()=>{var e;e="/menu/modifier/list",E?w(!0):r.push(e)},type:"button",variant:"ghost",children:s("cancel")}),(0,o.jsx)(n.zx,{"data-testid":"modifier-create-btn",type:"submit",variant:"primary",disabled:m,children:s("create")})]})})]})}),(0,o.jsx)(n.RZ,{modal:C,setModal:w,onLeave:()=>r.push("/menu/modifier/list")})]})})})})}):((0,n.hi)("You have no permissions to create modifier",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/modifier/list"}))},Ge=e=>{const{t}=(0,n.$G)(),s=(0,n.h_)(d.pH.MENU),[i,l]=(0,a.useState)(!1);return(0,o.jsxs)(n.u_,{visible:!0,onClose:e.onClose,style:{minWidth:360},children:[(0,o.jsx)("h3",{children:t("delete_modifier")}),(0,o.jsx)(n.iz,{}),(0,o.jsx)("span",{children:t("delete_modifier_confirm")}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:30},children:[(0,o.jsx)(n.zx,{size:"large",variant:"ghost",onClick:e.onClose,children:t("cancel")}),(0,o.jsx)(n.zx,{disabled:i,size:"large",variant:"danger",style:{marginLeft:20},onClick:()=>{(async()=>{l(!0),await s.delete(`/modifiers/${e.meta.id}`),e.onDelete()})()},children:t("delete")})]})]})},Xe=()=>{var e,t,s,l,r;const{can:c}=(0,a.useContext)(n.Il),{t:u}=(0,n.$G)(),m=(0,n.h_)(d.pH.MENU),h=(0,i.k6)(),x=(0,i.UO)(),[p,j]=(0,a.useState)(),[g,b]=(0,a.useState)(!0),[y,v]=(0,a.useState)(),N=c(d.g3.MENU.CAN_GET_MODIFIER),_=c(d.g3.MENU.CAN_UPDATE_MODIFIER),f=c(d.g3.MENU.CAN_DELETE_MODIFIER);return(0,a.useEffect)((()=>{(async()=>{const e=await m.get(`/modifiers/${x.id}`);j(e.data),b(!1)})()}),[x.id]),N?g?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","text","text","text"]})})}):(0,o.jsxs)(n.rj,{gutter:0,children:[(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsxs)("div",{className:"w-100 ui-flex between v-center pl-30 pr-20 pt-10",children:[(0,o.jsx)(n.ZT,{h2:!0,children:null==p||null==(e=p.payload)?void 0:e.name}),(0,o.jsx)(n.Lt,{renderTrigger:(e,t)=>(0,o.jsx)(n.zx,{size:"small",variant:"ghost",ref:t,onClick:e,iconOnly:!0,children:(0,o.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,o.jsx)("div",{className:"ui-flex column network-action-dropdown",children:(0,o.jsx)("div",{children:f&&(0,o.jsxs)(n.zx,{className:"w-100",variant:"danger-ghost",muted:!0,onClick:()=>{v({resource:"modifier",id:x.id})},children:[(0,o.jsx)(n.JO,{type:"Delete",size:20,className:"mr-10"}),u("Delete")]})})})})]})})}),(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:u("General Information")}),_&&(0,o.jsx)(n.rU,{component:n.Xd,onClick:()=>{var e;return h.push(`/menu/modifier/manage/${null==p||null==(e=p.payload)?void 0:e.id}`)},children:u("edit")})]}),children:(0,o.jsxs)(n.X2,{cols:1,children:[(0,o.jsxs)(n.sg,{className:"mt-10",children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:u("name")}),(0,o.jsx)(n.ZT,{children:null==p||null==(t=p.payload)?void 0:t.name})]}),(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:u("multiselect")}),(0,o.jsx)(n.ZT,{children:null!=p&&null!=(s=p.payload)&&s.multiselect?"Yes":"No"})]}),(0,o.jsxs)(n.sg,{children:[(0,o.jsx)(n.ZT,{className:"mb-5",size:"small",p:!0,muted:!0,children:u("options")}),null==p||null==(l=p.payload)||null==(r=l.options)?void 0:r.map((e=>(0,o.jsxs)("div",{className:"mt-5",children:[(0,o.jsxs)(n.ZT,{children:[e.name,", "]}),(0,o.jsx)(n.ZT,{children:e.price})," ",(0,o.jsx)("br",{})]},e.name)))]})]})})})}),y&&(0,o.jsx)(Ge,{meta:y,onClose:()=>v(void 0),onDelete:()=>{v(void 0),(0,n.hi)("Modifier deleted successfully",{type:"success"}),h.push("/menu/modifier/list")}})]}):((0,n.hi)("You have no permissions to view modifier",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/modifier/list"}))},Be=()=>{var e,t;const{can:s}=(0,a.useContext)(n.Il),{t:l}=(0,n.$G)(),r=(0,n.h_)(d.pH.MENU),c=(0,i.k6)(),u=(0,i.UO)(),[m,h]=(0,a.useState)(""),[x,p]=(0,a.useState)(!1),[j,g]=(0,a.useState)(!0),[b,y]=(0,a.useState)(),[v,N]=(0,a.useState)(!1),[_,C]=(0,a.useState)(!1),{register:w,handleSubmit:E,watch:I,formState:{errors:U},control:S,reset:Q}=(0,f.cI)({resolver:(0,Z.X)(d.Vy)}),{fields:F,append:W,remove:z}=(0,f.Dq)({control:S,name:"options"}),L=s(d.g3.MENU.CAN_UPDATE_MODIFIER);(0,a.useEffect)((()=>{const e=I(((e,{name:t})=>{t&&C(!0)}));return()=>e.unsubscribe()}),[I]),(0,a.useEffect)((()=>{(async()=>{const e=await r.get(`/modifiers/${u.id}`);var t,s,a;(y(e.data),e.data)&&Q({name:null==(t=e.data.payload)?void 0:t.name,options:null==(s=e.data.payload)?void 0:s.options,multiselect:null==(a=e.data.payload)?void 0:a.multiselect});g(!1)})()}),[u.id]);return L?j?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","labelField","labelField","labelField"]})})}):(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(n.ZT,{h2:!0,children:null==b||null==(e=b.payload)?void 0:e.name}),children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{offset:3,size:6,children:(0,o.jsxs)("form",{onSubmit:E((async e=>{h("");try{p(!0),await r.put(`/modifiers/${u.id}`,e),c.push(`/menu/modifier/view/${u.id}`)}catch(t){h(t.message)}finally{p(!1)}})),children:[(0,o.jsx)(n.NI,{label:l("modifier_name"),children:(0,o.jsx)(n.II,Object.assign({"data-testid":"input-modifier-name",placeholder:l("enter_modifier_name")},w("name"),{error:null==(t=U.name)?void 0:t.message}))}),(0,o.jsx)(n.NI,{className:"my-20",children:(0,o.jsx)(n.XZ,Object.assign({"data-testid":"checkbox-modifier-multiselect"},w("multiselect"),{label:l("multiselect")}))}),(F||[]).map(((e,t)=>{var s,a,i,r,d,c;return(0,o.jsxs)("div",{className:"mb-20",children:[(0,o.jsxs)("div",{className:"mb-10 ui-flex v-center between",children:[(0,o.jsxs)(n.ZT,{children:[l("option")," ",t+1]}),1!==F.length&&(0,o.jsx)(n.zx,{variant:"danger-ghost",size:"small",onClick:()=>z(t),iconOnly:!0,children:(0,o.jsx)(n.JO,{type:"Delete",size:18})})]}),(0,o.jsxs)(n.cw,{children:[(0,o.jsx)(n.NI,{label:l("name"),children:(0,o.jsx)(n.II,Object.assign({"data-testid":"modifier-option-name",placeholder:l("enter_option_name")},w(`options.${t}.name`),{error:null==(s=U.options)||null==(a=s[t])||null==(i=a.name)?void 0:i.message}))}),(0,o.jsx)(n.NI,{label:l("price"),children:(0,o.jsx)(n.II,Object.assign({"data-testid":"modifier-option-price",placeholder:"0.00",prefixNode:"$",step:".01"},w(`options.${t}.price`),{error:null==(r=U.options)||null==(d=r[t])||null==(c=d.price)?void 0:c.message}))})]},e.id)]},t)})),(0,o.jsx)(n.zx,{size:"small",variant:"ghost",onClick:()=>W({name:"",price:void 0}),leftIcon:(0,o.jsx)(n.JO,{type:"Plus",size:14}),children:l("add_option")}),U.options&&!Array.isArray(U.options)&&(0,o.jsx)(n.Bc,{className:"mt-20",error:U.options.message}),m&&(0,o.jsx)("div",{className:"mt-20",children:(0,o.jsx)(n.Bc,{error:m})}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsx)(n.X2,{children:(0,o.jsxs)("div",{className:"form-bottom-action",children:[(0,o.jsx)(n.zx,{onClick:()=>{var e;e="/menu/modifier/list",_?N(!0):c.push(e)},type:"button",variant:"ghost",children:l("cancel")}),(0,o.jsx)(n.zx,{"data-testid":"modifier-create-btn",type:"submit",variant:"primary",disabled:x,children:l("edit_modifier")})]})})]})}),(0,o.jsx)(n.RZ,{modal:v,setModal:N,onLeave:()=>c.push("/menu/modifier/list")})]})})})})}):((0,n.hi)("You have no permissions to update modifier",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/modifier/list"}))},Ae=(e,t)=>{if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0},Ve=({meta:{hotels:e,newAssign:t,overrideMenuHotel:s,removeMenuHotel:l},onClose:r})=>{const{t:c}=(0,n.$G)(),u=(0,n.h_)(d.pH.MENU),m=(0,i.k6)(),h=(0,i.UO)(),[x,p]=(0,a.useState)(!1);return(0,o.jsxs)(n.u_,{visible:!0,onClose:r,style:{minWidth:360,maxWidth:580},children:[(0,o.jsx)(n.ZT,{h2:!0,children:c("override_confirmation")}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsx)(n.ZT,{p:!0,muted:!0,children:c("menu_hotel_override_warning",{menu_name:h.name})}),(0,o.jsxs)("div",{className:"ui-flex column start mt-30",style:{overflowY:"auto",maxHeight:300},children:[null==t?void 0:t.map((e=>(0,o.jsxs)("div",{className:"ui-flex v-center mt-10",children:[(0,o.jsx)(n.ZT,{span:!0,children:e.hotel_name}),(0,o.jsx)(n.rU,{variant:"primary",component:"button",onClick:()=>null,className:"ml-10",children:h.name})]},e.id))),null==s?void 0:s.map((e=>{var t;return(0,o.jsxs)("div",{className:"ui-flex v-center mt-10",children:[(0,o.jsx)(n.ZT,{span:!0,children:e.hotel_name}),(0,o.jsx)(n.rU,{variant:"primary",component:"button",onClick:()=>null,className:"ml-10",children:(0,o.jsx)("s",{children:null==e||null==(t=e.menus[0])?void 0:t.name})}),(0,o.jsx)(n.rU,{variant:"primary",component:"button",onClick:()=>null,className:"ml-10",children:h.name})]},e.id)})),null==l?void 0:l.map((e=>{var t;return(0,o.jsxs)("div",{className:"ui-flex v-center mt-10",children:[(0,o.jsx)(n.ZT,{span:!0,children:e.hotel_name}),(0,o.jsx)(n.rU,{variant:"primary",component:"button",onClick:()=>null,className:"ml-10",children:(0,o.jsx)("s",{children:null==e||null==(t=e.menus[0])?void 0:t.name})}),(0,o.jsx)(n.ZT,{className:"ml-10 text-danger",size:"large",span:!0,children:c("no_menu_assigned")})]},e.id)}))]}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsxs)("div",{className:"ui-flex end mt-30",children:[(0,o.jsx)(n.zx,{size:"large",variant:"ghost",onClick:r,children:c("cancel")}),(0,o.jsx)(n.zx,{disabled:x,size:"large",variant:"primary",className:"ml-20",onClick:async()=>(p(!0),await u.post(`/${h.id}/hotels`,{hotel_ids:e}),m.push(`/menu/menu/view/${h.id}`),r()),children:c("confirm")})]})]})},$e=()=>{var e,t;const{can:s}=(0,a.useContext)(n.Il),{t:l}=(0,n.$G)(),m=(0,n.h_)(d.pH.MENU),h=s(d.g3.MENU.CAN_ASSIGN_MENU),x=s(d.g3.MENU.CAN_GET_HOTELS),p=[{name:"menu",queryParamName:"menuIds",data:async()=>{var e,t;const s=await m.get(""),a=[];return null==s||null==(e=s.data)||null==(t=e.payload)||t.forEach((e=>{a.push({label:e.name,queryParamValue:`${e.id||""}`})})),a}}],j=(0,i.k6)(),g=(0,i.UO)(),[b,y]=(0,a.useState)(),[v,N]=(0,a.useState)(),[_,f]=(0,a.useState)(""),[Z,C]=(0,a.useState)(""),w=c(Z),[E,I]=(0,a.useState)([]),[U,S]=(0,a.useState)([]),[Q,F]=(0,a.useState)(!0),[W,z]=(0,a.useState)(1);(0,a.useEffect)((()=>{f(j.location.search)}),[]);const L=async e=>{var t;const s=r().parse(j.location.search.replace("?","").replace(/\|([^&]*)&?/g,"&")),a=decodeURIComponent(r().stringify(s)).replace(/\|([^&]*)&?/g,"&"),i=w?`/external/relation/hotels?${a}name=${w}&page=${e}`:`/external/relation/hotels?${a}page=${e}`,n=await m.get(i);if(null!=n&&null!=(t=n.data)&&t.payload){var l;const t=[],s=((null==n||null==(l=n.data)?void 0:l.payload)||[]).map((e=>{var s,a;return null!=(s=e.menus)&&s.some((e=>e.id===+g.id))&&t.push(e.id),{hotel_id:e.id,hotel_name:e.name,hub_name:null==e||null==(a=e.hub)?void 0:a.name,menus:e.menus}}));I(t),S(t),y({payload:s,nextPage:n.data.nextPage,total:n.data.total}),F(!1),z(e)}};(0,a.useEffect)((()=>{L(1)}),[_,w]);return h&&x?Q?(0,o.jsxs)(n.rj,{gutter:0,children:[(0,o.jsx)(n.Od,{parts:["header"],className:"pt-10"}),(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","block"]})}),(0,o.jsx)(n.Zb,{className:"mt-20",page:!0,children:(0,o.jsx)(n.Od,{parts:["filterTable-2"]})})]}):(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{children:(0,o.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(n.ZT,{h2:!0,children:l("assign_menu_to_hotel",{menu_name:g.name})}),children:[(0,o.jsx)("div",{className:"menu-toolbar",children:(0,o.jsxs)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:[(0,o.jsx)(n.x$,{columns:p,onChange:e=>{f(e),j.push(`?${e}`)},filtersString:_}),(0,o.jsx)(n.Vr,{value:Z,placeholder:l("search"),onChange:e=>C(e.target.value)})]})}),(0,o.jsxs)(n.iA,{children:[(0,o.jsx)(n.ss,{children:(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{as:"th",style:{width:50}}),(0,o.jsx)(n.pj,{as:"th",children:l("name")}),(0,o.jsx)(n.pj,{as:"th",children:l("hub")}),(0,o.jsx)(n.pj,{as:"th",children:l("menu")})]})}),(0,o.jsx)(n.RM,{children:null==b||null==(e=b.payload)?void 0:e.map((e=>(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.XZ,{onChange:()=>{var t;(t=e.hotel_id)&&(E.includes(t)?I((E||[]).filter((e=>e!==t))):I([...E,t]))},checked:E.includes(e.hotel_id)},e.id)}),(0,o.jsx)(n.pj,{children:e.hotel_name}),(0,o.jsx)(n.pj,{children:e.hub_name}),(0,o.jsx)(n.pj,{children:e.menus.map((e=>e.name)).join(" / ")})]},e.id)))})]}),null!=b&&b.payload&&!((null==b||null==(t=b.payload)?void 0:t.length)<1)||Q?(0,o.jsx)(n.tl,{className:"ui-flex end mt-20",pages:(0,d.gc)(Number(null==b?void 0:b.total)),current:W,onPageChange:L}):(0,o.jsx)("div",{children:(0,o.jsx)(u,{})}),(0,o.jsx)(n.X2,{className:"mt-30",children:(0,o.jsxs)("div",{className:"form-bottom-action",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>{j.goBack()},children:l("cancel")}),(0,o.jsx)(n.zx,{variant:"primary",onClick:()=>{const e=[],t=[],s=[],a=[],i=U.filter((e=>!E.includes(e)));((null==b?void 0:b.payload)||[]).filter((a=>{E.includes(a.hotel_id)&&(a.menus.length&&a.menus[0].id!==+g.id?s.push(a):t.push(a),e.push(a.hotel_id))})),((null==b?void 0:b.payload)||[]).forEach((t=>{i.includes(t.hotel_id)&&(a.push(t),e.push(t.hotel_id))})),N({resource:"hotels",newAssign:t,overrideMenuHotel:s,removeMenuHotel:a,hotels:e})},disabled:Ae(U,E),children:l("save")})]})})]})}),v&&(0,o.jsx)(Ve,{meta:v,onClose:()=>N(void 0)})]})}):((0,n.hi)("You have no permissions to assign hotels menu",{type:"warning"}),(0,o.jsx)(i.l_,{to:`/menu/menu/view/${g.id}`}))},Re=()=>{var e,t;const{can:s}=(0,a.useContext)(n.Il),{t:l}=(0,n.$G)(),h=(0,n.h_)(d.pH.MENU),x=[{name:"hotel",queryParamName:"hotelIds",data:async()=>{var e,t;const s=await h.get("/external/relation/hotels"),a=[];return null==s||null==(e=s.data)||null==(t=e.payload)||t.forEach((e=>{a.push({label:e.name,queryParamValue:`${e.id||""}`})})),a}}],p=(0,i.k6)(),[j,g]=(0,a.useState)(),[y,v]=(0,a.useState)(""),[N,_]=(0,a.useState)(""),[f,Z]=(0,a.useState)(!0),[C,w]=(0,a.useState)(1),E=c(N),I=s(d.g3.MENU.CAN_GET_MENUS),U=s(d.g3.MENU.CAN_CREATE_MENU),S=s(d.g3.MENU.CAN_UPDATE_MENU),Q=s(d.g3.MENU.CAN_DELETE_MENU),F=s(d.g3.MENU.CAN_GET_SINGLE_MENU),W=s(d.g3.MENU.CAN_DUPLICATE_MENU);(0,a.useEffect)((()=>{I&&v(p.location.search)}),[]);const z=async e=>{const t=r().parse(p.location.search.replace("?","").replace(/\|([^&]*)&?/g,"&")),s=decodeURIComponent(r().stringify(t)).replace(/\|([^&]*)&?/g,"&"),a=E?`?name=${E}&${s}`:`${s?"/?":"?"}${s}`,i=await h.get(`${a}page=${e}`);g(i.data),w(e),Z(!1)};(0,a.useEffect)((()=>{z(1)}),[y,E]);return I?f?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","filterTable-2"]})})}):(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:l("menu_list")}),(0,o.jsxs)("div",{className:"ui-flex v-center",children:[S&&(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>p.push("/menu/menu/batch-edit"),className:"mr-10",children:l("batch_edit")}),U&&(0,o.jsx)(n.zx,{onClick:()=>p.push("/menu/menu/editor"),children:l("create")})]})]}),children:[(0,o.jsx)("div",{className:"menu-toolbar",children:(0,o.jsxs)("div",{className:"menu-toolbar-actions ui-flex start v-center",children:[(0,o.jsx)(n.x$,{columns:x,onChange:e=>{v(e),p.push(`?${e}`)},filtersString:y}),(0,o.jsx)(n.Vr,{value:N,placeholder:l("search"),onChange:e=>_(e.target.value)})]})}),(0,o.jsxs)(n.iA,{children:[(0,o.jsx)(n.ss,{children:(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{as:"th",children:l("name")}),(0,o.jsx)(n.pj,{as:"th",children:l("date_created")}),(0,o.jsx)(n.pj,{as:"th",children:l("status")}),(0,o.jsx)(n.pj,{as:"th",children:l("assigned_hotels")}),(0,o.jsx)(n.pj,{as:"th",children:l("last_published")}),(0,o.jsx)(n.pj,{as:"th",style:{width:50}})]})}),(0,o.jsx)(n.RM,{children:null==(e=(null==j?void 0:j.payload)||[])?void 0:e.map((e=>{var t;return(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{children:F?(0,o.jsx)(n.rU,{size:"medium",component:i.rU,to:`/menu/menu/view/${e.id}`,children:e.name}):e.name}),(0,o.jsx)(n.pj,{children:e.created_at&&(0,n.lm)(e.created_at)}),(0,o.jsx)(n.pj,{children:(0,o.jsx)(n.Ct,{leftIcon:"Circle",iconSize:5,size:"small",className:G()({"menu-inactive-badge":"ACTIVE"!==e.status}),children:"ACTIVE"===e.status?l("active"):l("inactive")})}),(0,o.jsx)(n.pj,{children:null==(t=e.hotels)?void 0:t.length}),(0,o.jsx)(n.pj,{children:e.published_at?(0,n.lm)(e.published_at,!0):"-"}),(0,o.jsx)(n.pj,{children:(Q||W)&&(0,o.jsx)(n.Lt,{renderTrigger:(e,t)=>(0,o.jsx)(n.Kk,{onClick:e,ref:t,children:(0,o.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:160},children:[(0,o.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>p.push(`/menu/menu/view/${e.id}`),leftIcon:(0,o.jsx)(n.JO,{type:"EyeOpen",size:18}),children:l("view")}),S&&(0,o.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>{p.push(`/menu/menu/manage/${e.id}`)},leftIcon:(0,o.jsx)(n.JO,{type:"Pen01",size:18}),children:l("edit")}),W&&(0,o.jsx)(n.zx,{className:"w-100",variant:"ghost",muted:!0,onClick:()=>(async e=>{try{const t=await h.post(`/duplicate/${e}`);p.push(`/menu/menu/view/${t.data.payload.id}`)}catch(t){console.log(t)}})(e.id||""),leftIcon:(0,o.jsx)(n.JO,{type:"CrossedArrows",size:18}),children:l("duplicate")})]})})})]},e.id)}))})]}),null!=j&&j.payload&&!((null==j||null==(t=j.payload)?void 0:t.length)<1)||f?(0,o.jsx)(n.tl,{className:"ui-flex end mt-20",pages:b(Number(null==j?void 0:j.total)),current:C,onPageChange:z}):(0,o.jsx)("div",{children:(0,o.jsx)(u,{})})]})})})}):(0,o.jsx)(m,{entity:"Menus"})},He=()=>{const{t:e}=(0,n.$G)(),t=(0,n.h_)(d.pH.MENU),[s,l]=(0,a.useReducer)(ze,{addedItems:{},itemsToSelect:{},categories:{},loading:!0,error:null}),{can:r}=(0,a.useContext)(n.Il),c=(0,i.k6)(),[u,m]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),[p,j]=(0,a.useState)(""),[g,b]=(0,a.useState)(!1),y=r(d.g3.MENU.CAN_CREATE_MENU);(0,a.useEffect)((()=>{(async()=>{try{const e=await t.get("/products?categorized=true");l({type:"set-menu",payload:{addedItems:{},categories:e.data.payload,loading:!1}})}catch(e){l({type:"set-menu",payload:{error:e.message,loading:!1}})}})()}),[]);const v=e=>{l({type:"add-update-item",payload:e})},N=e=>{l({type:"remove-item",payload:e})},_=e=>{l({type:"add-item",payload:e})},f=e=>{l({type:"reorder-subcategory",payload:e})};return y?s.loading?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","field","block"]})})}):(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(n.ZT,{h2:!0,children:e("create_new_menu")}),children:[(0,o.jsx)(n.X2,{gutterY:0,children:(0,o.jsx)(n.sg,{size:6,className:"pt-10",children:(0,o.jsxs)("div",{className:"ui-flex v-center",children:[(0,o.jsxs)(n.ZT,{children:[e("menu_name"),"*"]}),(0,o.jsx)(n.II,{className:"ml-10",style:{width:300},placeholder:e("menu_name"),value:p,onChange:e=>j(e.currentTarget.value)})]})})}),(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{size:6,children:(0,o.jsx)(n.ZT,{h2:!0,className:"my-10",children:e("menu_items")})})}),(0,o.jsxs)(n.X2,{cols:1,children:[(0,o.jsxs)(n.sg,{children:[(Object.keys(s.categories)||[]).map((e=>(0,o.jsx)(We,{className:"menu-category-collapsible",categoryId:e,menuState:s,updateItems:v,removeItem:N,addItem:_,reorderSubcategory:f,itemEdit:!0},e))),u&&(0,o.jsx)("div",{className:"mt-20",children:(0,o.jsx)(n.Bc,{error:u})}),(0,o.jsx)(n.iz,{vertical:30})]}),(0,o.jsx)(n.sg,{className:"mt-0",children:(0,o.jsxs)("div",{className:"ui-flex end",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>{return e="/menu/menu/list",void(p?b(!0):c.push(e));var e},children:e("cancel")}),(0,o.jsx)(n.zx,{variant:"primary",className:"ml-10",disabled:h,onClick:async()=>{try{const a=Le(s);if(""===p)throw new Error(e("enter_menu_name_error"));if(0===a.length)throw new Error(e("add_item_of_subcagegory_error"));x(!0),await t.post("",{name:p,products:a}),c.push("/menu/menu/list")}catch(a){m(a.message)}finally{x(!1)}},children:e("create")})]})}),(0,o.jsx)(n.RZ,{modal:g,setModal:b,onLeave:()=>c.push("/menu/menu/list")})]})]})})})}):((0,n.hi)("You have no permissions to create menu.",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/menu/list"}))},Ye=({menuState:e,closeModal:t})=>{var s,i,l;const{t:r}=(0,n.$G)(),[c,u]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[x,p]=(0,a.useState)(""),[j,g]=(0,a.useState)(!1),[b,y]=(0,a.useState)([]),{register:v,handleSubmit:N,setValue:_,watch:C,formState:{errors:w}}=(0,f.cI)({resolver:(0,Z.X)(d.QS),defaultValues:{}});(0,a.useEffect)((()=>{(()=>{const t=[],s=[];e.addedItems&&(Object.keys(e.addedItems).forEach((a=>{const i=e.addedItems[a];s.push({id:a,name:i.name}),Object.keys(i.subcategories).forEach((e=>{const s=i.subcategories[e];Object.keys(s.items).forEach((i=>{t.push({categoryId:a,subcategoryId:e,subcategoryName:s.items[i].subcategory_name||s.name,item:{id:i,name:s.items[i].name,price:s.items[i].price}})}))}))})),u(t),h(t),y(s))})()}),[e.addedItems]);return(0,a.useEffect)((()=>{if(j)if(x){const e=c.filter((e=>e.categoryId===x)).map((e=>JSON.stringify(e)));_("checkedItems",e)}else _("checkedItems",c.map((e=>JSON.stringify(e))));else _("checkedItems",null)}),[j]),(0,a.useEffect)((()=>{if(x){const e=c.filter((e=>e.categoryId===x));h(e)}else h(c)}),[x]),(0,o.jsxs)("div",{className:"menu-price-multiplier",children:[(0,o.jsx)(n.ZT,{h2:!0,children:r("price_multiplier")}),(0,o.jsx)(n.iz,{}),(0,o.jsxs)("form",{onSubmit:N((async s=>{const a=+s.amount;Array.isArray(s.checkedItems)||(s.checkedItems=[s.checkedItems]),s.checkedItems.forEach((t=>{const i=JSON.parse(t),n=e.addedItems[i.categoryId].subcategories[i.subcategoryId].items[i.item.id];let l=+n.price||+n.base_price;switch(s.action){case d.M9.ADD:l+=a;break;case d.M9.SUBTRACT:n.price-a>=n.base_price&&(l-=a);break;case d.M9.MULTIPLY:l*=a}l!==n.base_price?n.price=l:n.price=n.base_price})),t()})),children:[(0,o.jsxs)(n.rj,{children:[(0,o.jsxs)(n.X2,{children:[(0,o.jsxs)(n.sg,{cols:6,children:[(0,o.jsx)(n.ZT,{className:"mb-10",children:r("menu_items")}),(0,o.jsx)("div",{className:"mt-10 mb-10",children:(0,o.jsxs)(n.Ph,{value:"",selectProps:{onChange:e=>{p(e.target.value),g(!1),_("checkedItems",null)}},children:[(0,o.jsx)(n.Wx,{disabled:!0,hidden:!0,children:r("filter_by_categories")}),(0,o.jsx)(n.Wx,{value:"",children:r("all")}),(e=>{if(e.length)return(e||[]).map((e=>(0,o.jsx)(n.Wx,{value:e.id,children:e.name},e.id)))})(b||[])]})})]}),(0,o.jsxs)(n.sg,{cols:6,children:[(0,o.jsx)(n.ZT,{children:r("adjust_item_prices_by")}),(0,o.jsxs)("div",{className:"ui-flex price-options mt-10",children:[(0,o.jsxs)(n.Ph,{value:"",selectProps:Object.assign({},v("action")),error:null==w||null==(s=w.action)?void 0:s.message,children:[(0,o.jsx)(n.Wx,{value:"",disabled:!0,hidden:!0,children:r("action")}),(0,o.jsx)(n.Wx,{value:d.M9.ADD,children:r("add")}),(0,o.jsx)(n.Wx,{value:d.M9.SUBTRACT,children:r("subtract")}),(0,o.jsx)(n.Wx,{value:d.M9.MULTIPLY,children:r("multiply")})]}),(0,o.jsx)(n.II,Object.assign({className:"ml-10",placeholder:r("amount"),type:"number"},v("amount"),{error:null==w||null==(i=w.amount)?void 0:i.message}))]})]})]}),(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{cols:12,children:(0,o.jsxs)("div",{className:"checkboxes",children:[(0,o.jsx)(n.XZ,{onChange:e=>{g(e.target.checked)},checked:j,value:"all",className:"my-5 w-100 mb-20",label:r("select_all_items")},"all"),(m.length?m:c).map(((e,t)=>(0,a.createElement)(n.XZ,Object.assign({},v("checkedItems"),{key:t+""+e.item.id,value:JSON.stringify(e),className:"my-5 w-100",label:e.item.name+" - "+e.subcategoryName}))))]})})})]}),(0,o.jsx)(n.iz,{vertical:30}),(0,o.jsxs)("div",{className:"ui-flex v-center end",children:[(0,o.jsx)(n.zx,{size:"large",variant:"ghost",onClick:t,children:r("cancel")}),(0,o.jsx)(n.zx,{disabled:!(null!=(l=C("checkedItems"))&&l.length),className:"ml-10",type:"submit",children:r("continue")})]})]})]})},Je=()=>{const{can:e}=(0,a.useContext)(n.Il),{t}=(0,n.$G)(),s=(0,n.h_)(d.pH.MENU),{id:l}=(0,i.UO)(),r=(0,i.k6)(),[c,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(!0),[x,p]=(0,a.useState)(!1),[j,g]=(0,a.useState)(""),[b,y]=(0,a.useState)(!1),[v,N]=(0,a.useState)(),[_,f]=(0,a.useReducer)(ze,{addedItems:{},itemsToSelect:{},categories:{},loading:!0,error:null}),Z=e(d.g3.MENU.CAN_UPDATE_MENU);(0,a.useEffect)((()=>{(async()=>{try{const e=await s.get(`/${l}?formatted=true`),t=await s.get("/products?categorized=true"),{categories:a}=e.data.payload,i=t.data.payload,n=Object.assign({},a);((e,t)=>{Object.keys(e).forEach((s=>{var a;const i=t[s],n=null==(a=e[s])?void 0:a.subcategories;n&&Object.keys(i.subcategories).forEach((e=>{const a=t[s].subcategories[e];n[e]&&(a.sort_order=n[e].sort_order)}))}))})(n,i),g(e.data.payload.name),N(e.data.payload.published_at),f({type:"set-menu",payload:{menu:n,addedItems:a,categories:i,loading:!1}})}catch(e){f({type:"set-menu",payload:{error:e.message,loading:!1}})}})()}),[l]);const C=e=>{f({type:"add-update-item",payload:e})},w=e=>{f({type:"remove-item",payload:e})},E=e=>{f({type:"add-item",payload:e})},I=e=>{f({type:"reorder-subcategory",payload:e})};return Z?_.loading?(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["title","divider","field","title","block"]})})}):(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{children:(0,o.jsxs)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsx)(n.ZT,{h2:!0,children:t("edit_menu")}),children:[(0,o.jsx)(n.X2,{gutterY:0,children:(0,o.jsx)(n.sg,{size:6,className:"pt-10",children:(0,o.jsxs)("div",{className:"ui-flex v-center",children:[(0,o.jsxs)(n.ZT,{children:[t("menu_name"),"*"]}),(0,o.jsx)(n.II,{className:"ml-10",style:{width:300},placeholder:t("menu_name"),value:j,onChange:e=>g(e.currentTarget.value)})]})})}),(0,o.jsxs)(n.X2,{children:[(0,o.jsx)(n.sg,{size:6,children:(0,o.jsx)(n.ZT,{h2:!0,className:"my-10",children:t("menu_items")})}),(0,o.jsx)(n.sg,{size:6,className:"ui-flex end v-center",children:(0,o.jsx)(n.zx,{onClick:()=>h(!1),variant:"ghost",children:t("price_multiplier")})})]}),(0,o.jsxs)(n.X2,{cols:1,children:[(0,o.jsxs)(n.sg,{children:[(Object.keys(_.categories)||[]).map((e=>(0,o.jsx)(We,{className:"menu-category-collapsible",categoryId:e,menuState:_,updateItems:C,removeItem:w,addItem:E,reorderSubcategory:I,itemEdit:!0},e))),c&&(0,o.jsx)("div",{className:"mt-20",children:(0,o.jsx)(n.Bc,{error:c})}),(0,o.jsx)(n.iz,{vertical:30})]}),(0,o.jsx)(n.sg,{className:"mt-0",children:(0,o.jsxs)("div",{className:"ui-flex end",children:[(0,o.jsx)(n.zx,{variant:"ghost",onClick:()=>{var e;e="/menu/menu/list",j?y(!0):r.push(e)},children:t("cancel")}),(0,o.jsx)(n.zx,{variant:"primary",disabled:x,className:"ml-10",onClick:async()=>{try{const e=Le(_);if(""===j)throw new Error(t("enter_menu_name_error"));if(0===e.length)throw new Error(t("add_item_of_subcagegory_error"));p(!0),await s.put(`/${l}`,{products:e,name:j,published_at:v}),r.push(`/menu/menu/view/${l}`)}catch(c){u(c.message)}finally{p(!1)}},children:t("save")})]})}),(0,o.jsx)(n.RZ,{modal:b,setModal:y,onLeave:()=>r.push("/menu/menu/list")})]})]})}),!m&&(0,o.jsx)(n.u_,{visible:!0,onClose:()=>h(!0),style:{minWidth:500},children:(0,o.jsx)(Ye,{closeModal:()=>h(!0),menuState:_})})]})}):((0,n.hi)("You have no permissions to edit menu.",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/menu/list"}))},Pe=({className:e,category:t})=>{const{t:s}=(0,n.$G)(),[i,l]=(0,a.useState)(null),[r,d]=(0,a.useState)([]),c=e=>{const t=e.currentTarget.getAttribute("data-id");t&&l(t)};return(0,a.useEffect)((()=>{console.log(t);const e=Object.keys(t.subcategories).sort(((e,s)=>t.subcategories[e].sort_order-t.subcategories[s].sort_order));d(e),l(e[0])}),[]),(0,o.jsx)(n.zF,{title:t.name,className:e,onToggle:e=>{const s=Object.keys(t.subcategories)[0];l(e?i:s)},open:!0,children:(0,o.jsxs)("div",{className:"ui-flex",children:[(0,o.jsx)("div",{className:"menu-ordered-list ui-border-right p-10",children:r.map((e=>{const s=t.subcategories[e];return(0,o.jsx)(n.Xd,{className:G()("ui-flex w-100 px-20 menu-sub-order-item ui-rounded",{active:i===e}),"data-id":e,onClick:c,children:s.name},e)}))}),(0,o.jsx)("div",{className:"p-20 w-100",children:i&&(0,o.jsx)(n.rj,{gutter:0,children:(0,o.jsx)(n.X2,{colsLg:2,colsXl:3,colsXxl:4,gutter:5,children:(Object.keys(t.subcategories[i].items)||[]).length>0?(Object.keys(t.subcategories[i].items)||[]).map((e=>{var a,l,r;const d=t.subcategories[i].items[e],c=d.price&&d.price!==d.base_price;return(0,o.jsx)(n.sg,{children:(0,o.jsxs)("div",{className:"ui-rounded p-10 ui-flex w-100 ui-border",children:[(0,o.jsx)(n.Ee,{alt:d.name,src:`${null==d?void 0:d.image_base_url}/image/400x400/${d.image}`,width:57,height:57,className:G()("menu-item-card-image ui-rounded mr-10",{"item-86-opacity":d.item86})}),(0,o.jsxs)("div",{className:"menu-item-card-content w-100",children:[(0,o.jsxs)("div",{className:"menu-item-card-header ui-flex between v-start",children:[(0,o.jsx)(n.ZT,{size:"large",muted:d.item86,className:"ui-flex mb-5",children:d.name}),d.item86&&(0,o.jsx)(n.Ct,{size:"small",className:"menu-inactive-badge item86-badge",children:s("item_86")})]}),(0,o.jsxs)("div",{className:"menu-item-card-body",children:[(0,o.jsxs)(n.ZT,{className:G()("mt-10 pr-5",{"ui-text-line":c}),muted:c,children:["$",Number(d.base_price).toFixed(2)]}),c&&(0,o.jsxs)(n.ZT,{muted:d.item86,children:["$",null==(a=Number(d.price))?void 0:a.toFixed(2)]})]}),(0,o.jsx)("div",{className:"menu-item-card-footer ui-flex between w-100 v-end",children:(0,o.jsxs)(n.ZT,{size:"small",muted:d.item86,children:[null!=(l=d.suggested_items)&&l.length?null==(r=d.suggested_items)?void 0:r.length:s("no")," ",s("sugessted_items")]})})]})]})},d.id)})):(0,o.jsx)(n.ZT,{muted:!0,children:s("no_items_added")})})})})]})})},qe=()=>{var e,t;const{t:s}=(0,n.$G)(),l=(0,n.h_)(d.pH.MENU),r=(0,i.UO)(),[c,m]=(0,a.useState)(),[h,x]=(0,a.useState)(1),[p,j]=(0,a.useState)(!0),g=async e=>{const t=await l.get(`/${r.id}/hotels?page=${e}`);m(t.data),x(e),j(!1)};return(0,a.useEffect)((()=>{g(1)}),[]),(0,o.jsxs)("div",{children:[(0,o.jsxs)(n.iA,{children:[(0,o.jsx)(n.ss,{children:(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{as:"th",children:s("hotel")}),(0,o.jsx)(n.pj,{as:"th",children:s("hub")})]})}),(0,o.jsx)(n.RM,{children:null==c||null==(e=c.payload)?void 0:e.map((e=>{var t;return(0,o.jsxs)(n.SC,{children:[(0,o.jsx)(n.pj,{children:null==e?void 0:e.name}),(0,o.jsx)(n.pj,{children:null==e||null==(t=e.hub)?void 0:t.name})]},e.it)}))})]}),null!=c&&c.payload&&!((null==c||null==(t=c.payload)?void 0:t.length)<1)||p?(0,o.jsx)(n.tl,{className:"ui-flex end mt-20",pages:(0,d.gc)(Number(null==c?void 0:c.total)),current:h,onPageChange:g}):(0,o.jsx)("div",{children:(0,o.jsx)(u,{})})]})},Ke=e=>{const{t}=(0,n.$G)(),s=(0,n.h_)(d.pH.MENU),[i,l]=(0,a.useState)(!1);return(0,o.jsxs)(n.u_,{visible:!0,onClose:e.onClose,style:{minWidth:360},children:[(0,o.jsx)("h3",{children:t("delete_menu")}),(0,o.jsx)(n.iz,{}),(0,o.jsx)("span",{children:t("delete_menu_confirm")}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:30},children:[(0,o.jsx)(n.zx,{size:"large",variant:"ghost",onClick:e.onClose,children:t("cancel")}),(0,o.jsx)(n.zx,{disabled:i,size:"large",variant:"danger",style:{marginLeft:20},onClick:()=>{(async()=>{l(!0),await s.delete(`/${e.meta.id}`),e.onDelete()})()},children:t("delete")})]})]})},et=()=>{const{can:e}=(0,a.useContext)(n.Il),{t}=(0,n.$G)(),s=(0,n.h_)(d.pH.MENU),{id:l}=(0,i.UO)(),r=(0,i.k6)(),[c,u]=(0,a.useState)(),[m,h]=(0,a.useState)(!0),[x,p]=(0,a.useState)(),[j,g]=(0,a.useState)(),[b,y]=(0,a.useState)(),v=e(d.g3.MENU.CAN_GET_SINGLE_MENU),N=e(d.g3.MENU.CAN_GET_MENU_HOTELS),_=e(d.g3.MENU.CAN_PUSH_MENU_TO_PRODUCTION),f=e(d.g3.MENU.CAN_UPDATE_MENU),Z=e(d.g3.MENU.CAN_ASSIGN_MENU),C=e(d.g3.MENU.CAN_GET_HOTELS),w=e(d.g3.MENU.CAN_DELETE_MENU);(0,a.useEffect)((()=>{v&&(async()=>{try{const e=await s.get(`/${l}?formatted=true`);u(e.data.payload)}catch(a){var e,t;(0,n.hi)(null==(e=a.response)||null==(t=e.data)?void 0:t.message,{type:"error"}),r.push("/menu/menu/list")}finally{h(!1)}})()}),[]);return v?m?(0,o.jsxs)(n.rj,{gutter:0,children:[(0,o.jsx)(n.Od,{parts:["header"],className:"pt-10"}),(0,o.jsx)(n.Zb,{page:!0,children:(0,o.jsx)(n.Od,{parts:["cardHeaderAction","divider","block"]})}),(0,o.jsx)(n.Zb,{className:"mt-20",page:!0,children:(0,o.jsx)(n.Od,{parts:["filterTable-2"]})})]}):(0,o.jsxs)(n.rj,{gutter:0,children:[(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsxs)("div",{className:"w-100 ui-flex between v-center pl-30 pr-20 pt-10",children:[(0,o.jsx)(n.ZT,{h2:!0,children:c.name}),(0,o.jsx)(n.Lt,{renderTrigger:(e,t)=>(0,o.jsx)(n.zx,{size:"small",variant:"ghost",ref:t,onClick:e,iconOnly:!0,children:(0,o.jsx)(n.JO,{type:"MoreHorizontal01",size:18})}),hasArrow:!0,placement:"right",children:(0,o.jsx)("div",{className:"ui-flex column network-action-dropdown",children:(0,o.jsxs)("div",{children:[_&&(0,o.jsxs)(n.zx,{className:"w-100",variant:"danger-ghost",muted:!0,onClick:async()=>{try{var e,t;const a=await s.post(`/${l}/push-production`);p(null==(e=a.data.payload)?void 0:e.hasChanges),g(null==(t=a.data.payload)?void 0:t.published)}catch(a){(0,n.hi)(a.message,{type:"error"})}},children:[(0,o.jsx)(n.JO,{type:"Send",size:20,className:"mr-10"}),t("push_to_production"),x?"*":""]}),w&&(0,o.jsxs)(n.zx,{className:"w-100",variant:"danger-ghost",muted:!0,onClick:()=>{y({label:"menu",resource:"menu",id:l})},children:[(0,o.jsx)(n.JO,{type:"Delete",size:20,className:"mr-10"}),t("Delete")]})]})})})]})})}),(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"network-content",page:!0,header:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:t("menu_items")}),f&&(0,o.jsx)(n.rU,{component:i.rU,to:`/menu/menu/manage/${l}`,children:t("edit")})]}),children:Object.keys((null==c?void 0:c.categories)||[]).map((e=>{const t=c.categories[e];return(0,o.jsx)(Pe,{category:t,className:"menu-category-collapsible"},e)}))})})}),N&&(0,o.jsx)(n.X2,{children:(0,o.jsx)(n.sg,{children:(0,o.jsx)(n.Zb,{className:"menu-content",page:!0,header:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.ZT,{h2:!0,children:t("hotels_assigned")}),Z&&C&&(0,o.jsx)(n.rU,{component:i.rU,to:`/menu/menu/hotels/${c.name}/${l}`,disabled:j,children:t(j?"menu_not_published":"edit")})]}),children:(0,o.jsx)(qe,{})})})}),b&&(0,o.jsx)(Ke,{meta:b,onClose:()=>{y(void 0)},onDelete:()=>{y(void 0),(0,n.hi)("Menu deleted successfully",{type:"success"}),r.push("/menu/menu/list")}})]}):((0,n.hi)("You have no permissions to view menu",{type:"warning"}),(0,o.jsx)(i.l_,{to:"/menu/menu/list"}))};var tt=s(20864),st=s.n(tt),at={};at.styleTagTransform=K(),at.setAttributes=Y(),at.insert=R().bind(null,"head"),at.domAPI=V(),at.insertStyleElement=P();B()(st(),at);st()&&st().locals&&st().locals;const it={en:{translation:{menu_list:"Menu List",batch_edit:"Batch Edit",create_new:"Create New",search:"Search...",filter:"Filter",name:"Name",date_created:"Date Created",status:"Status",assigned_hotels:"Assigned Hotels",last_published:"Last Published",active:"Active",inactive:"Inactive",duplicate:"Duplicate",delete:"Delete",batch_edit_menus:"Batch Edit Menus",menu:"Menu",items:"Items",cancel:"Cancel",save:"Save",edit:"Edit",view:"View",added_items:"Added Items",sugessted_items:"Suggested Items",no:"No",no_items_added:"No items added",add_items:"Add Items",item_name:"Item Name",price:"Price",amount:"Amount",no_more_items_to_add:"No more items to add",same_price_error:"Cannot set same price!",lower_price_error:"Cannot set lower price!",item_price:"Item Price",no_sugessted_items:"No Suggested Items",enter_menu_name_error:"Please enter menu name",add_item_of_subcagegory_error:"Please add at least one item of a subcategory",create_new_menu:"Create New Menu",menu_name:"Menu Name",menu_items:"Menu Items",create:"Create",hotel:"Hotel",hub:"Hub",push_to_production:"Push to Production",hotels_assigned:"Hotels Assigned",menu_not_published:"Menu not published",edit_menu:"Edit Menu",price_multiplier:"Price Multiplier",override_confirmation:"Override Confirmation",menu_hotel_override_warning:"You are about to assign this menu to the following hotels. Note that hotels that already have menus assigned will be shown with the overridden menu first and the new menu assigned next to it.",no_menu_assigned:"No menu assigned",confirm:"Confirm",assign_menu_to_hotel:'Assign "{{menu_name}}" to Hotel',delete_menu:"Delete Menu?",delete_menu_confirm:"Are you sure you want to delete this menu?",filter_by_categories:"Filter By Categories",all:"All",select_all_items:"Select all items",adjust_item_prices_by:"Adjust items price by:",action:"Action",add:"Add",subtract:"Subtract",multiply:"Multiply",continue:"Continue",create_modifier:"Create Modifier",enter_modifier_name:"Enter modifier name",multiselect:"Multiselect",option:"Option",modifier_name:"Modifier Name",enter_option_name:"Enter option name",enter_option_price:"Enter option price",add_option:"Add option",options:"Options",edit_modifier:"Edit Modifier",delete_modifier:"Delete Modifier?",delete_modifier_confirm:"Are you sure you want to delete this modifier?",create_new_category:"Create New Category",category_name:"Category Name",enter_category_name:"Enter category name",is_subcategory:"Is Subcategory",start_period:"Start Period",end_period:"End Period",end:"End",create_category:"Create Category",category_list:"Category List",create_new_subcategory:"Create New Subcategory",subcategory_name:"Subcategory Name",enter_subcategory_name:"Enter subcategory name",category:"Category",please_select_category:"Please select category...",create_subcategory:"Create Subcategory",subcategory_list:"Subcategory List",select_subcategories:"Select subcategories",subcategory_not_selected_error:"At least one subcategory must be selected!",could_not_create_item:"Could not create item",create_new_item:"Create New Item",general_information:"General Information",enter_item_name:"Enter item name",item_description:"Item Description",enter_item_description:"Enter item description",needs_cutlery:"Needs cutlery",is_popular:"Is Popular",is_favorite:"Is Favorite",guest_view:"Guest view",raw_food:"Raw food",image:"Image",no_categories_found:"No categories found",modifiers:"Modifiers",categories:"Categories",subcategories:"Subcategories",no_modifiers_found:"No modifiers found",description:"Description",update_item_categories:"Update Item Categories",change_category_of_item_confirm:"Are you sure you want to change category of this item",remove_category_affected_warning:"Removing category for this item will cause changes on",update_item_subcategories:"Update Item Subcategories",not_found:"Not found",add_modifiers_to_item:"Add Modifiers to Item",delete_confirm:"Are you sure you want to delete this",delete_entity_used_on:"This {{entity}} is currently used on",type_validation_to_continue:'Type: "{{validation}}" to continue',items_list:"Items List",upload_attachment:"Upload Attachment",select_cities_that_apply:"Select cities that apply",select_city:"Select City",selected_hubs:"Selected Hubs",hubs_list:"Hubs list",item_86:"86",start_time_greater_than_end_time_error:"Start time must not be greater than End time","ui_sdk.smart_component.leave_page_alert":"Hey there! It looks like you\u2019re in the middle of writing something and you\n      haven\u2019t saved all of your content."}}};(0,n.Dm)(it);const nt=({history:e})=>{const{setNavigation:t,can:s}=(0,a.useContext)(n.Il),l=s(d.g3.MENU.CAN_GET_MENUS),r=s(d.g3.MENU.CAN_GET_CATEGORIES),c=s(d.g3.MENU.CAN_GET_ITEMS),u=s(d.g3.MENU.CAN_GET_SUBCATEGORIES),m=s(d.g3.MENU.CAN_GET_MODIFIERS);return(0,a.useEffect)((()=>{t&&t(d.pH.MENU,[{name:"Menu",path:"/menu/menu/list",permission:l},{name:"Category",path:"/menu/category/list",permission:r},{name:"Item",path:"/menu/item/list",permission:c},{name:"Modifier",path:"/menu/modifier/list",permission:m}])}),[l,r,u,c,m]),(0,o.jsx)(i.F0,{history:e,children:(0,o.jsxs)(i.rs,{children:[(0,o.jsx)(i.AW,{path:"/menu/category",children:(0,o.jsxs)(i.rs,{children:[(0,o.jsx)(i.AW,{exact:!0,path:"/menu/category/list",children:(0,o.jsx)(_,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/category/editor",children:(0,o.jsx)(C,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/category/view/:id",children:(0,o.jsx)(S,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/category/manage/:id",children:(0,o.jsx)(Q,{})})]})}),(0,o.jsx)(i.AW,{path:"/menu/item",children:(0,o.jsxs)(i.rs,{children:[(0,o.jsx)(i.AW,{exact:!0,path:"/menu/item/list",children:(0,o.jsx)(L,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/item/create",children:(0,o.jsx)(ne,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/item/manage/:type/:id",children:(0,o.jsx)(ge,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/item/view/:id",children:(0,o.jsx)(Ie,{})})]})}),(0,o.jsx)(i.AW,{path:"/menu/modifier",children:(0,o.jsxs)(i.rs,{children:[(0,o.jsx)(i.AW,{exact:!0,path:"/menu/modifier/list",children:(0,o.jsx)(Ue,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/modifier/editor",children:(0,o.jsx)(De,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/modifier/view/:id",children:(0,o.jsx)(Xe,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/modifier/manage/:id",children:(0,o.jsx)(Be,{})})]})}),(0,o.jsx)(i.AW,{path:"/menu",children:(0,o.jsxs)(i.rs,{children:[(0,o.jsx)(i.AW,{exact:!0,path:"/menu/menu/list",children:(0,o.jsx)(Re,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/menu/batch-edit",children:(0,o.jsx)(ke,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/menu/editor",children:(0,o.jsx)(He,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/menu/manage/:id",children:(0,o.jsx)(Je,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/menu/view/:id",children:(0,o.jsx)(et,{})}),(0,o.jsx)(i.AW,{exact:!0,path:"/menu/menu/hotels/:name/:id",children:(0,o.jsx)($e,{})}),(0,o.jsx)(i.l_,{to:"/menu/menu/list"})]})})]})})}},49322:e=>{e.exports=[[e.id,".ui-input-file{display:flex;color:var(--text-primary, #343434);font-size:.875rem}.ui-input-file.ui-input-error{color:var(--theme-danger, #D3514E)}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0LWZpbGUuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxlQUFlLFlBQVksQ0FBQyxrQ0FBa0MsQ0FBQyxpQkFBaUIsQ0FBQyw4QkFBOEIsa0NBQWtDIiwiZmlsZSI6ImlucHV0LWZpbGUuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi51aS1pbnB1dC1maWxle2Rpc3BsYXk6ZmxleDtjb2xvcjp2YXIoLS10ZXh0LXByaW1hcnksICMzNDM0MzQpO2ZvbnQtc2l6ZTouODc1cmVtfS51aS1pbnB1dC1maWxlLnVpLWlucHV0LWVycm9ye2NvbG9yOnZhcigtLXRoZW1lLWRhbmdlciwgI0QzNTE0RSl9Il19 */","",""]]},11439:e=>{e.exports=[[e.id,".ui-select-trigger{position:relative;height:40px;font-size:14px;background:#fff;border:1px solid var(--border-color, #D9D9D9);box-sizing:border-box;border-radius:5px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;padding:0 10px}.ui-select-trigger.ui-select-open{border-radius:5px 5px 0 0}.ui-select-trigger .ui-icon{color:#a9a9a9}.ui-select-trigger.ui-select-error{border-color:var(--theme-danger, #D3514E);color:var(--theme-danger, #D3514E)}.ui-select-trigger.ui-select-error .ui-icon{color:var(--theme-danger, #D3514E)}.ui-select-suffix{display:flex;align-items:center;right:0}.ui-select-suffix>*+*{margin-left:10px}.ui-select{z-index:var(--z-dropdown, )}.ui-select .ui-card{box-shadow:none !important;padding:0;border-radius:0 0 5px 5px !important;border:1px solid var(--border-color, #D9D9D9);border-top:none;overflow:hidden;filter:none !important;padding:5px}.ui-select .ui-list .ui-list-item{font-size:14px;padding:0 5px}.ui-select .ui-list .ui-list-item[hidden]{display:none}.selectselect{display:none;pointer-events:none;position:absolute;opacity:0}.ui-select-multi-wrapper{margin-top:-5px;margin-left:-10px}.ui-select-multi-wrapper .ui-chip{margin-left:5px;margin-top:5px;font-size:.75rem}.ui-select-trigger-multiple{height:auto;padding:4px 10px;min-height:40px}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbUJBQW1CLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLDZDQUE2QyxDQUFDLHFCQUFxQixDQUFDLGlCQUFpQixDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsNkJBQTZCLENBQUMsa0JBQWtCLENBQUMsY0FBYyxDQUFDLGtDQUFrQyx5QkFBeUIsQ0FBQyw0QkFBNEIsYUFBYSxDQUFDLG1DQUFtQyx5Q0FBeUMsQ0FBQyxrQ0FBa0MsQ0FBQyw0Q0FBNEMsa0NBQWtDLENBQUMsa0JBQWtCLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLGdCQUFnQixDQUFDLFdBQVcsMkJBQTJCLENBQUMsb0JBQW9CLDBCQUEwQixDQUFDLFNBQVMsQ0FBQyxvQ0FBb0MsQ0FBQyw2Q0FBNkMsQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsQ0FBQyxrQ0FBa0MsY0FBYyxDQUFDLGFBQWEsQ0FBQywwQ0FBMEMsWUFBWSxDQUFDLGNBQWMsWUFBWSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsZUFBZSxDQUFDLGlCQUFpQixDQUFDLGtDQUFrQyxlQUFlLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDLDRCQUE0QixXQUFXLENBQUMsZ0JBQWdCLENBQUMsZUFBZSIsImZpbGUiOiJpbmRleC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnVpLXNlbGVjdC10cmlnZ2Vye3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDo0MHB4O2ZvbnQtc2l6ZToxNHB4O2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvciwgI0Q5RDlEOSk7Ym94LXNpemluZzpib3JkZXItYm94O2JvcmRlci1yYWRpdXM6NXB4O2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7cGFkZGluZzowIDEwcHh9LnVpLXNlbGVjdC10cmlnZ2VyLnVpLXNlbGVjdC1vcGVue2JvcmRlci1yYWRpdXM6NXB4IDVweCAwIDB9LnVpLXNlbGVjdC10cmlnZ2VyIC51aS1pY29ue2NvbG9yOiNhOWE5YTl9LnVpLXNlbGVjdC10cmlnZ2VyLnVpLXNlbGVjdC1lcnJvcntib3JkZXItY29sb3I6dmFyKC0tdGhlbWUtZGFuZ2VyLCAjRDM1MTRFKTtjb2xvcjp2YXIoLS10aGVtZS1kYW5nZXIsICNEMzUxNEUpfS51aS1zZWxlY3QtdHJpZ2dlci51aS1zZWxlY3QtZXJyb3IgLnVpLWljb257Y29sb3I6dmFyKC0tdGhlbWUtZGFuZ2VyLCAjRDM1MTRFKX0udWktc2VsZWN0LXN1ZmZpeHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3JpZ2h0OjB9LnVpLXNlbGVjdC1zdWZmaXg+Kisqe21hcmdpbi1sZWZ0OjEwcHh9LnVpLXNlbGVjdHt6LWluZGV4OnZhcigtLXotZHJvcGRvd24sICl9LnVpLXNlbGVjdCAudWktY2FyZHtib3gtc2hhZG93Om5vbmUgIWltcG9ydGFudDtwYWRkaW5nOjA7Ym9yZGVyLXJhZGl1czowIDAgNXB4IDVweCAhaW1wb3J0YW50O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yLCAjRDlEOUQ5KTtib3JkZXItdG9wOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO2ZpbHRlcjpub25lICFpbXBvcnRhbnQ7cGFkZGluZzo1cHh9LnVpLXNlbGVjdCAudWktbGlzdCAudWktbGlzdC1pdGVte2ZvbnQtc2l6ZToxNHB4O3BhZGRpbmc6MCA1cHh9LnVpLXNlbGVjdCAudWktbGlzdCAudWktbGlzdC1pdGVtW2hpZGRlbl17ZGlzcGxheTpub25lfS5zZWxlY3RzZWxlY3R7ZGlzcGxheTpub25lO3BvaW50ZXItZXZlbnRzOm5vbmU7cG9zaXRpb246YWJzb2x1dGU7b3BhY2l0eTowfS51aS1zZWxlY3QtbXVsdGktd3JhcHBlcnttYXJnaW4tdG9wOi01cHg7bWFyZ2luLWxlZnQ6LTEwcHh9LnVpLXNlbGVjdC1tdWx0aS13cmFwcGVyIC51aS1jaGlwe21hcmdpbi1sZWZ0OjVweDttYXJnaW4tdG9wOjVweDtmb250LXNpemU6Ljc1cmVtfS51aS1zZWxlY3QtdHJpZ2dlci1tdWx0aXBsZXtoZWlnaHQ6YXV0bztwYWRkaW5nOjRweCAxMHB4O21pbi1oZWlnaHQ6NDBweH0iXX0= */","",""]]},20864:e=>{e.exports=[[e.id,".menu-container{display:flex;flex-direction:column;height:100%;width:100%}.menu-container .menu-content+.menu-content{margin-top:10px}.menu-content{width:100%;flex:1}.menu-content>.ui-row{margin-top:0}.menu-content form>.ui-form-control+.ui-form-control{margin-top:10px}.toolbar{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:20px 30px}.ui-row+.ui-row{margin-top:0}.form-bottom-action{display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.form-bottom-action>.ui-btn+.ui-btn{margin-left:10px}.menu-sidebar-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.menu-view-header{height:40px;display:flex;align-items:center;justify-content:space-between;padding-left:30px;padding-right:20px;margin-bottom:10px}.menu-container>.ui-row>.ui-col>.ui-card+.ui-card{margin-top:10px}.menu-text-capitalize{text-transform:capitalize}.menu-no-permissions{flex:1}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0eWxlcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQixZQUFZLENBQUMscUJBQXFCLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyw0Q0FBNEMsZUFBZSxDQUFDLGNBQWMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsWUFBWSxDQUFDLHFEQUFxRCxlQUFlLENBQUMsU0FBUyxZQUFZLENBQUMsa0JBQWtCLENBQUMsa0JBQWtCLENBQUMsNkJBQTZCLENBQUMsaUJBQWlCLENBQUMsZ0JBQWdCLFlBQVksQ0FBQyxvQkFBb0IsWUFBWSxDQUFDLGtCQUFrQixDQUFDLGtCQUFrQixDQUFDLHdCQUF3QixDQUFDLG9DQUFvQyxnQkFBZ0IsQ0FBQyxxQkFBcUIsWUFBWSxDQUFDLGtCQUFrQixDQUFDLDZCQUE2QixDQUFDLGtCQUFrQixDQUFDLGtCQUFrQixXQUFXLENBQUMsWUFBWSxDQUFDLGtCQUFrQixDQUFDLDZCQUE2QixDQUFDLGlCQUFpQixDQUFDLGtCQUFrQixDQUFDLGtCQUFrQixDQUFDLGtEQUFrRCxlQUFlLENBQUMsc0JBQXNCLHlCQUF5QixDQUFDLHFCQUFxQixNQUFNIiwiZmlsZSI6InN0eWxlcy5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1lbnUtY29udGFpbmVye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJX0ubWVudS1jb250YWluZXIgLm1lbnUtY29udGVudCsubWVudS1jb250ZW50e21hcmdpbi10b3A6MTBweH0ubWVudS1jb250ZW50e3dpZHRoOjEwMCU7ZmxleDoxfS5tZW51LWNvbnRlbnQ+LnVpLXJvd3ttYXJnaW4tdG9wOjB9Lm1lbnUtY29udGVudCBmb3JtPi51aS1mb3JtLWNvbnRyb2wrLnVpLWZvcm0tY29udHJvbHttYXJnaW4tdG9wOjEwcHh9LnRvb2xiYXJ7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOnJvdzthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoyMHB4IDMwcHh9LnVpLXJvdysudWktcm93e21hcmdpbi10b3A6MH0uZm9ybS1ib3R0b20tYWN0aW9ue2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LWVuZH0uZm9ybS1ib3R0b20tYWN0aW9uPi51aS1idG4rLnVpLWJ0bnttYXJnaW4tbGVmdDoxMHB4fS5tZW51LXNpZGViYXItaGVhZGVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luLWJvdHRvbToxNXB4fS5tZW51LXZpZXctaGVhZGVye2hlaWdodDo0MHB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZy1sZWZ0OjMwcHg7cGFkZGluZy1yaWdodDoyMHB4O21hcmdpbi1ib3R0b206MTBweH0ubWVudS1jb250YWluZXI+LnVpLXJvdz4udWktY29sPi51aS1jYXJkKy51aS1jYXJke21hcmdpbi10b3A6MTBweH0ubWVudS10ZXh0LWNhcGl0YWxpemV7dGV4dC10cmFuc2Zvcm06Y2FwaXRhbGl6ZX0ubWVudS1uby1wZXJtaXNzaW9uc3tmbGV4OjF9Il19 */","",""]]},74272:e=>{e.exports=[[e.id,".menu-ordered-list{max-width:200px;width:100%}.menu-ordered-list .menu-sub-order-item+.menu-sub-order-item{margin-top:10px}.menu-category-collapsible+.menu-category-collapsible{margin-top:10px}.menu-sub-order-item{border:1px solid var(--border-color, #D9D9D9);word-break:break-all;white-space:initial;min-height:40px;padding-top:5px;padding-bottom:5px}.menu-sub-order-item .ui-icon{display:flex;min-width:30px}.menu-sub-order-item.active{background-color:var(--theme-primary, #004438);color:var(--text-secondary, #FFF)}.menu-sub-order-item.drag-active{display:none !important}.menu-drop-indicator{height:0px;visibility:hidden}.menu-drop-indicator.active{border:1px dashed var(--border-color, #D9D9D9);height:50px;visibility:visible;margin-top:10px}.menu-drop-indicator+.menu-sub-order-item{margin-top:10px}.menu-item-suggested-list .ui-chip+.ui-chip{margin-top:5px}.menu-item-suggested-list .menu-suggested-chips{max-height:200px;overflow:auto}.menu-item-suggested-list .menu-suggested-chips .menu-select-chip-wrapper:first-child .ui-divider{display:none}.menu-item-suggested-list .menu-selected-chips{max-height:140px;overflow:auto;margin-left:-5px}.menu-item-suggested-list .menu-selected-chips .ui-chip{margin-left:5px}.menu-price-multiplier{max-width:500px}.menu-price-multiplier .price-options .ui-select-trigger{min-width:110px}.menu-price-multiplier .checkboxes{max-height:250px;overflow-y:auto}.menu-toolbar{margin-bottom:20px}.menu-toolbar .menu-toolbar-actions>*+*{margin-left:5px}.menu-inactive-badge{background-color:var(--theme-dangerLighter, #faebea);color:var(--theme-danger, #D3514E)}.item-86-opacity{opacity:.6}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0eWxlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbUJBQW1CLGVBQWUsQ0FBQyxVQUFVLENBQUMsNkRBQTZELGVBQWUsQ0FBQyxzREFBc0QsZUFBZSxDQUFDLHFCQUFxQiw2Q0FBNkMsQ0FBQyxvQkFBb0IsQ0FBQyxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLGtCQUFrQixDQUFDLDhCQUE4QixZQUFZLENBQUMsY0FBYyxDQUFDLDRCQUE0Qiw4Q0FBOEMsQ0FBQyxpQ0FBaUMsQ0FBQyxpQ0FBaUMsdUJBQXVCLENBQUMscUJBQXFCLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyw0QkFBNEIsOENBQThDLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLGVBQWUsQ0FBQywwQ0FBMEMsZUFBZSxDQUFDLDRDQUE0QyxjQUFjLENBQUMsZ0RBQWdELGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxrR0FBa0csWUFBWSxDQUFDLCtDQUErQyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsd0RBQXdELGVBQWUsQ0FBQyx1QkFBdUIsZUFBZSxDQUFDLHlEQUF5RCxlQUFlLENBQUMsbUNBQW1DLGdCQUFnQixDQUFDLGVBQWUsQ0FBQyxjQUFjLGtCQUFrQixDQUFDLHdDQUF3QyxlQUFlLENBQUMscUJBQXFCLG9EQUFvRCxDQUFDLGtDQUFrQyxDQUFDLGlCQUFpQixVQUFVIiwiZmlsZSI6InN0eWxlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWVudS1vcmRlcmVkLWxpc3R7bWF4LXdpZHRoOjIwMHB4O3dpZHRoOjEwMCV9Lm1lbnUtb3JkZXJlZC1saXN0IC5tZW51LXN1Yi1vcmRlci1pdGVtKy5tZW51LXN1Yi1vcmRlci1pdGVte21hcmdpbi10b3A6MTBweH0ubWVudS1jYXRlZ29yeS1jb2xsYXBzaWJsZSsubWVudS1jYXRlZ29yeS1jb2xsYXBzaWJsZXttYXJnaW4tdG9wOjEwcHh9Lm1lbnUtc3ViLW9yZGVyLWl0ZW17Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IsICNEOUQ5RDkpO3dvcmQtYnJlYWs6YnJlYWstYWxsO3doaXRlLXNwYWNlOmluaXRpYWw7bWluLWhlaWdodDo0MHB4O3BhZGRpbmctdG9wOjVweDtwYWRkaW5nLWJvdHRvbTo1cHh9Lm1lbnUtc3ViLW9yZGVyLWl0ZW0gLnVpLWljb257ZGlzcGxheTpmbGV4O21pbi13aWR0aDozMHB4fS5tZW51LXN1Yi1vcmRlci1pdGVtLmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLXRoZW1lLXByaW1hcnksICMwMDQ0MzgpO2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5LCAjRkZGKX0ubWVudS1zdWItb3JkZXItaXRlbS5kcmFnLWFjdGl2ZXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudH0ubWVudS1kcm9wLWluZGljYXRvcntoZWlnaHQ6MHB4O3Zpc2liaWxpdHk6aGlkZGVufS5tZW51LWRyb3AtaW5kaWNhdG9yLmFjdGl2ZXtib3JkZXI6MXB4IGRhc2hlZCB2YXIoLS1ib3JkZXItY29sb3IsICNEOUQ5RDkpO2hlaWdodDo1MHB4O3Zpc2liaWxpdHk6dmlzaWJsZTttYXJnaW4tdG9wOjEwcHh9Lm1lbnUtZHJvcC1pbmRpY2F0b3IrLm1lbnUtc3ViLW9yZGVyLWl0ZW17bWFyZ2luLXRvcDoxMHB4fS5tZW51LWl0ZW0tc3VnZ2VzdGVkLWxpc3QgLnVpLWNoaXArLnVpLWNoaXB7bWFyZ2luLXRvcDo1cHh9Lm1lbnUtaXRlbS1zdWdnZXN0ZWQtbGlzdCAubWVudS1zdWdnZXN0ZWQtY2hpcHN7bWF4LWhlaWdodDoyMDBweDtvdmVyZmxvdzphdXRvfS5tZW51LWl0ZW0tc3VnZ2VzdGVkLWxpc3QgLm1lbnUtc3VnZ2VzdGVkLWNoaXBzIC5tZW51LXNlbGVjdC1jaGlwLXdyYXBwZXI6Zmlyc3QtY2hpbGQgLnVpLWRpdmlkZXJ7ZGlzcGxheTpub25lfS5tZW51LWl0ZW0tc3VnZ2VzdGVkLWxpc3QgLm1lbnUtc2VsZWN0ZWQtY2hpcHN7bWF4LWhlaWdodDoxNDBweDtvdmVyZmxvdzphdXRvO21hcmdpbi1sZWZ0Oi01cHh9Lm1lbnUtaXRlbS1zdWdnZXN0ZWQtbGlzdCAubWVudS1zZWxlY3RlZC1jaGlwcyAudWktY2hpcHttYXJnaW4tbGVmdDo1cHh9Lm1lbnUtcHJpY2UtbXVsdGlwbGllcnttYXgtd2lkdGg6NTAwcHh9Lm1lbnUtcHJpY2UtbXVsdGlwbGllciAucHJpY2Utb3B0aW9ucyAudWktc2VsZWN0LXRyaWdnZXJ7bWluLXdpZHRoOjExMHB4fS5tZW51LXByaWNlLW11bHRpcGxpZXIgLmNoZWNrYm94ZXN7bWF4LWhlaWdodDoyNTBweDtvdmVyZmxvdy15OmF1dG99Lm1lbnUtdG9vbGJhcnttYXJnaW4tYm90dG9tOjIwcHh9Lm1lbnUtdG9vbGJhciAubWVudS10b29sYmFyLWFjdGlvbnM+Kisqe21hcmdpbi1sZWZ0OjVweH0ubWVudS1pbmFjdGl2ZS1iYWRnZXtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLXRoZW1lLWRhbmdlckxpZ2h0ZXIsICNmYWViZWEpO2NvbG9yOnZhcigtLXRoZW1lLWRhbmdlciwgI0QzNTE0RSl9Lml0ZW0tODYtb3BhY2l0eXtvcGFjaXR5Oi42fSJdfQ== */","",""]]}}]);